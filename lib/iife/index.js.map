{"version":3,"file":"index.js","sources":["../node_modules/bbmn-core/src/marionette.js","../node_modules/bbmn-core/src/helpers.js","../node_modules/bbmn-core/src/base-class.js","is-known-ctor/ctors.js","is-known-ctor/index.js","better-result/index.js","camel-case/index.js","take-first/index.js","compare-ab/get-model.js","compare-ab/get-view.js","compare-ab/index.js","comparator/index.js","convert-string/to-number.js","to-bool/options.js","to-bool/index.js","convert-string/index.js","flat/traverse.js","flat/index.js","get-by-path/get-property.js","get-by-path/get-by-path-array.js","get-by-path/index.js","get-option/index.js","has-flag/index.js","is-empty-value/index.js","get-flag/index.js","mix/options.js","mix/create-mixin-from-object.js","mix/normalize-arguments.js","mix/with.js","mix/index.js","params-to-object/index.js","set-by-path/set-property.js","set-by-path/ensure-arguments.js","set-by-path/set-by-path-array.js","set-by-path/normalize-options.js","set-by-path/trigger-model-change-events.js","set-by-path/index.js","unflat/index.js","compare-objects/index.js","trigger-method/index.js","trigger-method-on/index.js","merge-options/index.js","build-view-by-key/index.js","enums/index.js","skip-take/index.js","merge-objects/index.js"],"sourcesContent":["import Mn, { Region } from 'backbone.marionette';\n\nconst MnObject = Mn.Object || Mn.MnObject;\n\nexport {\n\tMnObject, Region\n};\n","import { Model, Collection, BackboneView } from './backbone.js';\n\n\nexport function isClass(arg, Base){\n\treturn _.isFunction(arg) && (arg == Base || arg.prototype instanceof Base);\n}\n\n\nexport function isModel(arg){\n\treturn arg instanceof Model;\n}\n\nexport function isModelClass(arg) {\n\treturn isClass(arg, Model);\n}\n\n\nexport function isCollection(arg){\n\treturn arg instanceof Collection;\n}\nexport function isCollectionClass(arg) {\n\treturn isClass(arg, Collection);\n}\n\n\nexport function isView(arg){\n\treturn arg instanceof BackboneView;\n}\n\n\nexport function isViewClass(arg) {\n\treturn isClass(arg, View);\n}\n\nexport const extend = Model.extend;\n\n","import { extend } from './helpers.js';\n\nconst BaseClass = function BaseClass(){}\nBaseClass.extend = extend;\n\nexport default BaseClass;\n","import { Model, Collection, BackboneView, Router, MnObject, Region, BaseClass } from 'bbmn-core';\r\nimport Mn from 'backbone.marionette';\r\n\r\nconst ctors = _.reduce([\r\n\tModel, Collection, BackboneView, Router, MnObject, Region, BaseClass\r\n], (ctors, ctor) => {\r\n\tif(_.isFunction(ctor)){\r\n\t\tctors.push(ctor);\r\n\t}\r\n}, []);\r\n\r\n\r\nlet tryGetFromMn = ['Application', 'AppRouter'];\r\n\r\n_.each(tryGetFromMn, ClassName => {\r\n\t_.isFunction(Mn[ClassName]) && ctors.push(Mn[ClassName]);\r\n});\r\n\r\n\r\nexport default ctors;\r\n","import knownCtors from './ctors.js';\r\n\r\nfunction isKnownCtor(arg) {\r\n\tlet isFn = _.isFunction(arg);\r\n\tlet result = _(knownCtors).some((ctor) => arg === ctor || arg.prototype instanceof ctor);\r\n\treturn isFn && result;\r\n}\r\n\r\nexport default isKnownCtor;\r\n","import isKnownCtor from '../is-known-ctor/index.js';\r\nexport default function betterResult(obj, key, opts = {})\r\n{\r\n\tlet { context, args, checkAlso, force } = opts;\r\n\tlet defaultValue = opts.default;\r\n\r\n\tif(!_.isString(key) || key === '') return;\r\n\t\r\n\tlet value = (obj || {})[key];\r\n\r\n\tif (value != null && (!_.isFunction(value) || isKnownCtor(value)))\r\n\t\treturn value;\r\n\t\t\r\n\tlet result = force !== false && _.isFunction(value) ? value.apply(context || obj, args) : value;\r\n\r\n\tif (result == null && _.isObject(checkAlso)) {\r\n\t\tlet alsoOptions = _.omit(opts, 'checkAlso');\r\n\t\tresult = betterResult(checkAlso, key, alsoOptions);\r\n\t}\r\n\r\n\tif (result == null && defaultValue != null )\r\n\t\tresult = defaultValue;\r\n\r\n\treturn result;\r\n}\r\n","// camelCase('asd:qwe:zxc') -> asdQweZxc\r\n// camelCase('asd:qwe:zxc', true) -> AsdQweZxc\r\nexport default function camelCase(...args) {\r\n\t\r\n\tlet text;\r\n\tlet first;\r\n\r\n\tif (!args.length) return;\r\n\telse if (args.length == 1) {\r\n\t\ttext = args[0];\r\n\t} else {\r\n\t\tif(_.isBoolean(args[args.length - 1])){\r\n\t\t\tfirst = args.pop();\r\n\t\t}\r\n\t\ttext = _.filter(args, chunk => chunk != null).join(':');\r\n\t}\r\n\r\n\tif (!text) return text;\r\n\r\n\tif (!_.isString(text)) return text.toString();\r\n\ttext = text.replace(/:{2,}/gmi,':');\r\n\tvar splitter = first === true ? /(^|:)(\\w)/gi : /(:)(\\w)/gi;\r\n\ttext = text.replace(splitter, (match, prefix, text) => text.toUpperCase());\r\n\tif(!first)\r\n\t\ttext = text.replace(/(^)(\\w)/gi, (match, prefix, text) => text.toLowerCase());\r\n\treturn text;\r\n\r\n}\r\n","export default function takeFirst(key, ...args) {\r\n\tif(!_.isString(key) || key === '') return;\r\n\tlet value;\r\n\t_.some(args, arg => {\r\n\t\tif (key in (arg || {})) {\r\n\t\t\tvalue = arg[key];\r\n\t\t\treturn true;\r\n\t\t}\r\n\t});\r\n\treturn value;\r\n}\r\n","import { isModel, isView } from 'bbmn-core';\r\n\r\nexport default function getModel(arg){\r\n\r\n\tif (isModel(arg)) { return arg; }\r\n\t\r\n\tif (isView(arg)) { return arg.model; }\r\n\r\n}\r\n","import { isView }  from 'bbmn-core';\r\nexport default function getModel(arg){\r\n\treturn isView(arg) && arg;\r\n}\r\n","\r\nimport getModel from './get-model.js';\r\nimport getView from './get-view.js';\r\nexport default function compareAB(a, b, func){\r\n\tif(_.isArray(func)) {\r\n\r\n\t\tlet result = 0;\r\n\r\n\t\t_(func).every((f) => {\r\n\t\t\tresult = compareAB(a,b,f);\r\n\t\t\treturn result === 0;\r\n\t\t});\r\n\t\t\r\n\t\treturn result;\r\n\t} else {\r\n\t\tif (_.isFunction(func)) {\r\n\t\t\ta = func.call(a, getModel(a), getView(a));\r\n\t\t\tb = func.call(b, getModel(b), getView(b));\r\n\t\t}\r\n\r\n\t\tif (a < b) return -1;\r\n\t\tif (a > b) return 1;\r\n\t\treturn 0;\r\n\r\n\t}\r\n}\r\n","import compareAB from '../compare-ab/index.js';\r\nexport default function comparator(...args){\r\n\tvar result = 0;\r\n\r\n\t//for simple case (arg1, arg2, compare)\r\n\tif (args.length <= 3 && !_.isArray(args[0])){\r\n\r\n\t\treturn compareAB.apply(null, args);\r\n\r\n\t} \r\n\t//for complex cases ([arg1, arg2, compare], [], .... [])\r\n\t//each arguments should be an array\r\n\telse {\r\n\r\n\t\t_(args).every((single) => {\r\n\r\n\t\t\tif(!_.isArray(single)) return true;\r\n\t\t\tresult = compareAB(...single);\r\n\t\t\treturn result === 0;\r\n\t\t});\r\n\r\n\t}\r\n\r\n\treturn result;\r\n}\r\n","export default function toNumber(text){\r\n\tif(_.isNumber(text)) return text;\r\n\tif(!_.isString(text)) return;\r\n\t\r\n\tlet value = parseFloat(text, 10);\r\n\tif(isNaN(value))\r\n\t\tvalue = undefined;\r\n\t\t\r\n\treturn value;\r\n}\r\n","export default {\r\n\tnullable: true, \r\n\tstrict: false,\r\n\treturnNullAs: undefined, \r\n\treturnEmptyAs: undefined, \r\n\treturnNullAndEmptyAs: undefined,\r\n\treturnAnyAs: undefined, \r\n\treturnOtherAs: undefined\r\n};\r\n","import defaultOptions from './options.js';\r\n\r\nconst trueValues = ['true','1','-1','yes'];\r\nconst falseValues = ['false','0','no'];\r\n\r\nconst alternative = function(...args) {\r\n\tlet returnValue;\r\n\t_(args).some(arg => {\r\n\t\tif(_.isBoolean(arg)) {\r\n\t\t\treturnValue = arg;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t});\r\n\treturn returnValue;\r\n};\r\n\r\nconst valueOrAlternative = function(nullable, nullValue, value, ...alts){\r\n\tlet alt = alternative(...alts);\r\n\tif (alt != null)\r\n\t\treturn alt;\r\n\telse if (nullable)\r\n\t\treturn nullValue;\r\n\telse\r\n\t\treturn value;\r\n};\r\n\r\nconst convertToBoolean = function (arg, opts = {})\r\n{\r\n\r\n\tlet other;\r\n\tlet options = _.extend({}, defaultOptions, opts);\r\n\tlet { \r\n\t\tnullable, strict,\r\n\t\treturnNullAs, returnEmptyAs, returnNullAndEmptyAs,\r\n\t\treturnAnyAs, returnOtherAs\r\n\t} = options;\r\n\r\n\r\n\r\n\tif (arg == null) {\r\n\t\treturn valueOrAlternative(nullable, undefined, false, returnNullAs, returnNullAndEmptyAs);\r\n\t}\r\n\telse if (arg === '') {\r\n\t\treturn valueOrAlternative(nullable, undefined, false, returnEmptyAs, returnNullAndEmptyAs);\r\n\t} else if (_.isBoolean(arg)) {\r\n\t\treturn arg;\r\n\t}\r\n\t//  else if (_.isObject(arg)) {\r\n\t// }\r\n\t\r\n\tother = strict \r\n\t\t? (nullable ? undefined : false) \r\n\t\t: true;\r\n\t\t\r\n\r\n\tlet text = arg.toString().toLowerCase();\r\n\tlet isTrue = convertToBoolean.trueValues.indexOf(text) > -1;\r\n\tlet isFalse = convertToBoolean.falseValues.indexOf(text) > -1;\r\n\r\n\r\n\tif (_.isBoolean(returnAnyAs)) {\r\n\t\treturn returnAnyAs;\r\n\t} else if (_.isBoolean(returnOtherAs)) {\r\n\t\tother = returnOtherAs;\r\n\t}\r\n\t\r\n\treturn isTrue \r\n\t\t? true \r\n\t\t: isFalse \r\n\t\t\t? false \r\n\t\t\t: other;\r\n};\r\n\r\nconvertToBoolean.trueValues = trueValues;\r\nconvertToBoolean.falseValues = falseValues;\r\nexport default convertToBoolean;\r\n","import toNumber from './to-number.js';\r\nimport toBoolean from '../to-bool/index.js';\r\n\r\n\r\n//this is under development yet and can be change in any time\r\nexport default function convertString(text, type, opts) {\r\n\r\n\tswitch(type){\r\n\tcase 'number':\r\n\t\treturn toNumber(text, opts);\r\n\tcase 'boolean':\r\n\t\treturn toBoolean(text, opts);\r\n\tdefault:\r\n\t\treturn text;\r\n\t}\r\n\r\n\r\n}\r\n","import { isModel } from 'bbmn-core';\r\nexport default function traverse(fields, root)\r\n{\r\n\troot = root || '';\r\n\tif (this == null || typeof this != 'object') {\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar hash = isModel(this) ? this.attributes : this;\r\n\r\n\tvar props = Object.getOwnPropertyNames(hash);\r\n\r\n\tfor (var x = 0; x < props.length; x++) {\r\n\t\tvar name = props[x];\r\n\t\tvar prop = this[name];\r\n\r\n\t\tif (prop == null || typeof prop != 'object' || (prop instanceof Date || prop instanceof Array)) {\r\n\r\n\t\t\tfields[root + name] = prop;\r\n\t\t}\r\n\t\telse if (typeof prop == 'object') {\r\n\r\n\t\t\ttraverse.call(prop, fields, root + name + '.');\r\n\t\t}\r\n\t}\r\n\t\t\r\n}\r\n","import traverse from './traverse.js';\r\n\r\nexport default function flattenObject(obj) {\r\n\tif (obj == null || !_.isObject(obj)) return;\r\n\tvar res = {};\r\n\ttraverse.call(obj, res);\r\n\treturn res;\r\n}\r\n","import { isModel } from 'bbmn-core';\r\nfunction getProperty(context, name)\r\n{\r\n\tif(context == null || !_.isObject(context) || name == null || name == '') return;\r\n\tif (isModel(context))\r\n\t\treturn context.get(name, { gettingByPath: true  });\r\n\telse\r\n\t\treturn context[name];\r\n}\r\nexport default getProperty;\t\r\n","\r\nimport getProperty from './get-property.js';\r\n\r\nfunction getByPathArray(context, propertyName, pathArray) {\r\n\t\r\n\tif (context == null || !_.isObject(context) || propertyName == null || propertyName == '')\r\n\t\treturn;\r\n\r\n\tvar prop = getProperty(context, propertyName);\r\n\r\n\tif (!pathArray.length || (pathArray.length && prop == null))\r\n\t\treturn prop;\r\n\r\n\tvar nextName = pathArray.shift();\r\n\r\n\treturn getByPathArray(prop, nextName, pathArray);\r\n\r\n}\r\n\r\nexport default getByPathArray;\r\n","import getByPathArray from './get-by-path-array.js';\r\n\r\nexport default function getByPath(obj, path) {\r\n\r\n\tif (obj == null || !_.isObject(obj) || path == null || path == '') return;\r\n\r\n\tvar pathArray = _.isString(path) ? path.split('.')\r\n\t\t: _.isArray(path) ? [].slice.call(path)\r\n\t\t\t: [path];\r\n\r\n\tvar prop = pathArray.shift();\r\n\r\n\treturn getByPathArray(obj, prop, pathArray);\r\n\r\n}\r\n","import result from '../better-result/index.js';\r\n\r\nexport default function getOption(context = {}, key, opts, also) {\r\n\r\n\tif(_.isObject(key) && _.isString(opts)){\r\n\t\tlet _opts = also;\r\n\t\talso = key;\r\n\t\tkey = opts;\r\n\t\topts = _opts;\r\n\t}\r\n\r\n\tlet options = _.extend({ args:[context], context }, opts, { default: null });\r\n\tlet { deep } = options;\r\n\tlet defaultValue = opts && opts.default;\r\n\r\n\tlet value = result(context.options || also, key, options);\r\n\tif (value == null && deep !== false) {\r\n\t\tvalue = result(context, key, options);\r\n\t}\r\n\t\r\n\treturn value != null ? value : defaultValue;\r\n\r\n}\r\n\r\nexport function instanceGetOption(...args){\r\n\treturn getOption(this, ...args);\r\n}\r\n","import camelCase from '../camel-case/index.js';\r\nfunction transformStringArray(arr, opts = {}){\r\n\tlet { ignoreCase = true, toCamelCase = false } = opts;\r\n\treturn _(arr).map(value => {\r\n\t\tif (ignoreCase) \r\n\t\t\treturn value.toLowerCase();\r\n\t\telse if (toCamelCase)\r\n\t\t\treturn camelCase(value);\r\n\t\telse\r\n\t\t\treturn value;\r\n\t});\r\n}\r\nexport default function hasFlag(value, flag, opts = {}){\r\n\tif (value == null || flag == null) return false;\r\n\r\n\t// if(typeof value != typeof flag)\r\n\t// \tthrow new Error('value and flag must be of same type. allowed types: string, number');\r\n\r\n\r\n\tif (_.isNumber(value) && _.isNumber(flag)) {\r\n\t\tlet has = value & flag;\r\n\t\treturn opts.all === true ? has === flag : has > 0;\r\n\t} else if ((_.isNumber(value) && !_.isNumber(flag)) || (!_.isNumber(value) && _.isNumber(flag))) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tif (!_.isArray(flag)) { flag = flag.toString(); }\r\n\tif (!_.isString(flag) && !_.isArray(flag)) { return false; }\r\n\r\n\tlet rawflags = _.isArray(flag) \r\n\t\t? flag\r\n\t\t: flag.split(/\\s*,\\s*/);\r\n\r\n\r\n\tlet rawvalues;\r\n\tif(_.isString(value)){\r\n\t\trawvalues = value.split(/\\s*,\\s*/);\r\n\t} else if(_.isArray(value)){\r\n\t\trawvalues = values;\r\n\t} else if(_.isObject(value)) {\r\n\t\trawvalues = opts.useObjectValues \r\n\t\t\t? _.map(value, v => v)\r\n\t\t\t: _.keys(value);\r\n\t} else {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tlet flags = transformStringArray(rawflags, opts);\r\n\tlet values = transformStringArray(rawvalues, opts);\r\n\r\n\tlet intersection = _.intersection(values, flags);\t\t\r\n\tif (intersection.length == 0) return false;\r\n\tif (intersection.length == flags.length) return true;\r\n\treturn opts.all != true;\r\n\r\n\r\n\t// if(_.isString(value) && _.isString(flag)) {\r\n\t// \tif(value === '' || flag === '') return false;\r\n\t// \tlet values = transformStringArray(value.split(/\\s*,\\s*/), opts);\r\n\t// \tlet flags = transformStringArray(flag.split(/\\s*,\\s*/), opts);\r\n\r\n\t// }\r\n\r\n}\r\n","export default function isEmptyValue(arg, { allowWhiteSpace = false } = {}) {\r\n\tif (arg == null || _.isNaN(arg)) return true;\r\n\tif (!_.isString(arg)) return false;\r\n\tif (arg === '') return true;\r\n\t\r\n\treturn !allowWhiteSpace && arg.trim() === '';\r\n\t\r\n}\r\n","import isEmptyValue from '../is-empty-value/index.js';\r\n\r\nfunction normalizeStringArray(arr){\r\n\treturn _.reduce(arr, (result,item) => {\r\n\t\tif(item == null) return;\r\n\t\tresult.push(item.toString());\r\n\t\treturn result;\r\n\t}, []);\r\n}\r\n\r\nfunction compare(a, b, options = {}){\r\n\tif (a == null) {\r\n\t\treturn false;\r\n\t}\r\n\tlet { caseInsensitive = true } = options;\r\n\tif (!_.isString(a)) {\r\n\t\ta = a.toString();\r\n\t}\r\n\tif(caseInsensitive) {\r\n\t\ta = a.toLowerCase();\r\n\t\tb = b.toLowerCase();\r\n\t}\r\n\treturn a === b;\r\n}\r\n\r\nexport default function getFlag(value, flag, options = {}){\r\n\tlet flags;\r\n\tif (isEmptyValue(value) || isEmptyValue(flag)) { return; }\t\r\n\tlet { returnAs, useObjectValues, takeObjectKeys, all, delimeter = ', ', doNotPluck } = options;\r\n\tif(_.isString(flag)){\r\n\t\tflags = normalizeStringArray(flag.split(/\\s*,\\s*/gmi), options);\r\n\t}else if(_.isArray(flag)) {\r\n\t\tflags = normalizeStringArray(flag, options);\r\n\t} else {\r\n\t\treturn;\r\n\t}\r\n\tif (returnAs == null) {\r\n\t\treturnAs = _.isArray(flag) ? 'array' : 'string';\r\n\t}\r\n\tif(_.isString(value)) {\r\n\t\tvalue = normalizeStringArray(value.split(/\\s*,\\s*/gmi), options);\r\n\t}\r\n\tlet isArray = _.isArray(value);\r\n\tlet method = all ? 'every' : 'some';\r\n\tlet founded = _.reduce(value, (filtered, item, key) => {\r\n\t\tlet check = item;\r\n\t\tif(!isArray && !useObjectValues){\r\n\t\t\tcheck = key;\r\n\t\t}\r\n\t\t\r\n\t\tlet good = _[method](flags, flag => compare(check, flag, options));\r\n\t\t//console.log(method, good, flags, value);\r\n\t\tif (!good) { return filtered; }\r\n\r\n\t\tif (isArray) {\r\n\t\t\tfiltered.push(check);\r\n\t\t} else {\r\n\t\t\tfiltered.push({value: item, key });\r\n\t\t}\r\n\t\treturn filtered;\r\n\t}, []);\r\n\r\n\t//console.log(founded);\r\n\tif (returnAs === 'string') {\r\n\t\tif (isArray) {\r\n\t\t\treturn founded.join(delimeter);\r\n\t\t} else {\r\n\t\t\tlet key = takeObjectKeys ? 'key' : 'value';\r\n\t\t\treturn _.pluck(founded, key).join(delimeter);\r\n\t\t}\r\n\t} else if(returnAs === 'array'){\r\n\t\tif (isArray || doNotPluck) {\r\n\t\t\treturn founded;\r\n\t\t} else {\r\n\t\t\tlet key = takeObjectKeys ? 'key' : 'value';\r\n\t\t\treturn _.pluck(founded, key);\r\n\t\t}\r\n\t} else if(returnAs === 'object') {\r\n\t\treturn _.reduce(founded, (result, item, index) => {\r\n\t\t\tlet value = isArray \r\n\t\t\t\t? item \r\n\t\t\t\t: takeObjectKeys ? item.key : item.value;\r\n\t\t\tlet key = isArray \r\n\t\t\t\t? index \r\n\t\t\t\t: takeObjectKeys ? item.value : item.key;\r\n\t\t\tresult[key] = value;\r\n\t\t\treturn result;\r\n\t\t}, {});\r\n\t}\r\n\r\n}\r\n","export default {\r\n\tmergeObjects: true,\r\n\twrapObjectWithConstructor: true,\r\n};\r\n","export default function createMixinFromObject(arg) {\r\n\tlet mixedObj = _.clone(arg);\r\n\tlet mixedCtor = _.isFunction(mixedObj.constructor) && mixedObj.constructor;\r\n\treturn Base => { \r\n\t\tif (_.isFunction(mixedCtor)) {\r\n\t\t\t//let providedCtor = ((mixed) => mixed)(obj.constructor);\r\n\t\t\tmixedObj.constructor = function mx(){\r\n\t\t\t\tBase.apply(this, arguments);\r\n\t\t\t\tmixedCtor.apply(this, arguments);\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn Base.extend(mixedObj);\r\n\t};\r\n}\r\n","\r\nimport createMixinFromObject from './create-mixin-from-object.js';\r\n\r\nexport default function normalizeArguments(args, opts = {}) {\r\n\tlet raw = {};\r\n\tlet wrap = opts.wrapObjectWithConstructor == true;\r\n\tlet merge = opts.mergeObjects == true;\r\n\tlet mixins = [];\r\n\t_(args).each(arg => {\r\n\t\t\r\n\t\t//if argument is function just put it to mixins array\r\n\t\t//and continue;\r\n\t\tif (_.isFunction(arg)) {\r\n\t\t\tmixins.push(arg);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//if argument is not an object just skip it\r\n\t\tif (!_.isObject(arg)) return;\r\n\r\n\t\t//if mergeObjects == false or wrapObjectWithConstructor == true \r\n\t\t//and there is a constructor function\r\n\t\t//converting to a mixin function\r\n\t\t//otherwise extend rawObject\r\n\t\tif (!merge || (wrap && _.isFunction(arg.constructor))) {\r\n\t\t\tmixins.push(createMixinFromObject(arg));\r\n\t\t} \r\n\t\telse {\r\n\t\t\t_.extend(raw, arg);\r\n\t\t}\r\n\t\r\n\t});\r\n\r\n\t//if rawObject is not empty\r\n\t//convert it to a mixin function\r\n\t//and put it to the begin of mixins array\r\n\tif (_.size(raw))\r\n\t\tmixins.unshift(createMixinFromObject(raw));\r\n\r\n\treturn mixins;\r\n}\r\n","\r\n\r\nimport normalizeArguments from './normalize-arguments.js';\r\n\r\nexport default function withMethod(...args) {\r\n\r\n\tlet mixins = normalizeArguments(args, this.options);\r\n\tlet Mixed = this.class;\r\n\tif (!mixins.length) return Mixed;\r\n\telse\r\n\t\treturn _.reduce(mixins, (Memo, Ctor) => { \r\n\t\t\tlet mixed = Ctor(Memo);\r\n\t\t\treturn mixed;\r\n\t\t}, Mixed);\r\n\r\n}\r\n","import defaultOptions from './options.js';\r\nimport withMethod from './with.js';\r\n\r\nimport extend from '../extend/index.js';\r\n\r\n\r\n\r\nexport default function mix(_ctor, options) {\r\n\r\n\tlet opts = _.extend({}, defaultOptions, options);\r\n\r\n\tlet ctor;\r\n\r\n\tif (_.isFunction(_ctor)) {\r\n\t\tctor = _ctor;\r\n\t}\r\n\telse if (_.isObject(_ctor)) {\r\n\t\tlet b = _.isFunction(_ctor.constructor) && _ctor.constructor;\r\n\t\tctor = function mx() { b.apply(this, arguments); };\r\n\t\t_.extend(ctor.prototype, _.omit(_ctor,'constructor'));\r\n\r\n\t} else {\r\n\t\tthrow new Error('Mix argument should be a class or a plain object');\r\n\t}\r\n\r\n\tif (!_.isFunction(ctor.extend))\r\n\t\tctor.extend = extend;\r\n\r\n\treturn {\r\n\t\toptions: opts,\r\n\t\twith: withMethod,\r\n\t\tclass: ctor,\r\n\t};\r\n}\r\n","function pstoSetPair(context, pair){\r\n\tif(!_.isString(pair)) return;\r\n\tlet keyvalue = pair.split('=');\r\n\tlet key = keyvalue.shift();\r\n\tlet value = keyvalue.join('=');\r\n\tpstoSetKeyValue(context, key, value);\r\n}\r\n\r\nfunction pstoSetKeyValue(context, key, value){\r\n\t\t\r\n\tif (key == null) return;\r\n\tkey = decodeURIComponent(key);\r\n\tvalue != null && (value = decodeURIComponent(value));\r\n\r\n\tif(!(key in context))\r\n\t\treturn (context[key] = value);\r\n\r\n\t!_.isArray(context[key]) && (context[key] = [context[key]]);\r\n\r\n\tcontext[key].push(value);\r\n\r\n\treturn context[key];\r\n}\r\n\r\nexport default function paramsToObject(raw, opts = {emptyObject: true}){\r\n\tlet result = {};\r\n\tif(!_.isString(raw)) return opts.emptyObject ? result : raw;\r\n\r\n\tlet pairs = raw.split('&');\r\n\t_(pairs).each((pair) => pstoSetPair(result, pair));\r\n\t\r\n\treturn result;\r\n}\r\n","import getProperty from '../get-by-path/get-property.js';\r\nimport { isModel } from 'bbmn-core';\r\n\r\nfunction setProperty(context, name, value) {\r\n\tif (isModel(context)) {\r\n\t\tcontext.set(name, value, { silent: true });\r\n\t}\r\n\telse {\r\n\t\tcontext[name] = value;\r\n\t}\r\n\r\n\treturn getProperty(context, name);\r\n}\r\n\r\nexport default setProperty;\r\n","export default function ensureSetByPathArguments(context, path)\r\n{\r\n\tlet errors = [];\r\n\tif (context == null || !_.isObject(context)) {\r\n\t\terrors.push(new Error('Context is not an object'));\r\n\t}\r\n\tif (!_.isString(path) || path === '') {\r\n\t\terrors.push(new Error('Path is not a string'));\r\n\t}\r\n\tif (errors.length) {\r\n\t\treturn errors;\r\n\t}\r\n}\r\n","import getProperty from '../get-by-path/get-property.js';\r\nimport setProperty from './set-property.js';\r\nimport ensureArguments from './ensure-arguments.js';\r\nimport { isModel } from 'bbmn-core';\r\nexport default function setByPathArr(context, propertyName, pathArray, value, options) {\r\n\r\n\tlet argumentsErrors = ensureArguments(context, propertyName);\r\n\tif (argumentsErrors) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tlet modelContext;\r\n\tif (isModel(context)) {\r\n\t\tmodelContext = {\r\n\t\t\tmodel: context,\r\n\t\t\tproperty: propertyName,\r\n\t\t\tpathChunks: [].slice.call(pathArray)\r\n\t\t};\r\n\t}\r\n\r\n\t//set value if this is a last chunk of path\r\n\tif (!pathArray.length) {\r\n\r\n\t\tmodelContext && options.models.push(modelContext);\r\n\r\n\t\treturn setProperty(context, propertyName, value, options);\r\n\r\n\t} else {\r\n\r\n\t\tvar prop = getProperty(context, propertyName);\r\n\r\n\t\tif (!_.isObject(prop) && !options.force) {\r\n\t\t\treturn;\r\n\t\t} else if (!_.isObject(prop) && options.force) {\r\n\t\t\tprop = setProperty(context, propertyName, {}, options);\r\n\t\t} \r\n\r\n\t\tmodelContext && options.models.push(modelContext);\r\n\r\n\t\tvar nextName = pathArray.shift();\t\r\n\t\treturn setByPathArr(prop, nextName, pathArray, value, options);\r\n\r\n\t}\r\n}\r\n","export default function normalizeSetByPathOptions(opts = {}, ext)\r\n{\r\n\r\n\tlet options = _.extend({}, opts, ext, {\r\n\t\tsilent: opts.silent === true,\r\n\t\tforce: opts.force !== false,\r\n\t\t//passPath: [],\r\n\t\tmodels: []\r\n\t});\r\n\r\n\treturn options;\r\n}\r\n","export default function triggerModelEventsOnSetByPath(value, options = {})\r\n{\r\n\tif (options.silent || !options.models.length) {\r\n\t\treturn;\r\n\t}\r\n\t\r\n\t_(options.models).each(context => {\r\n\t\tlet rest = context.pathChunks.join(':');\r\n\t\tif (rest) {\r\n\t\t\tcontext.model.trigger(`change:${context.property}:${rest}`, context.model, value);\r\n\t\t}\r\n\t\tcontext.model.trigger(`change:${context.property}`, context.model, value);\r\n\t\tcontext.model.trigger('change', context.model);\r\n\t});\r\n\r\n}\r\n","import setByPathArray from './set-by-path-array.js';\r\nimport normalizeOptions from './normalize-options.js';\r\nimport triggerModelChangeEvents from './trigger-model-change-events.js';\r\nimport ensureArguments from './ensure-arguments.js';\r\nexport default function setByPath(context, path, value, opts = {}) {\r\n\r\n\tlet argumentsErrors = ensureArguments(context, path);\r\n\tif (argumentsErrors) {\r\n\t\treturn value;\r\n\t}\r\n\r\n\tlet pathArray = path.split('.');\t\r\n\tlet options = normalizeOptions(opts, { path, pathArray: [].slice.call(pathArray) });\r\n\r\n\tlet propertyName = pathArray.shift();\r\n\r\n\tlet result = setByPathArray(context, propertyName, pathArray, value, options);\r\n\r\n\tif (result === undefined && value !== undefined) {\r\n\t\treturn value;\r\n\t}\r\n\r\n\ttriggerModelChangeEvents(value, options);\r\n\r\n\treturn value;\r\n\r\n\t// if (_.isObject(path) && !_.isArray(path)) {\r\n\t// \tvalue = path.value;\r\n\t// \toptions.force = path.force !== false;\r\n\t// \toptions.silent = path.silent === true;\r\n\t// \tpath = path.path;\r\n\t// }\r\n\r\n\t// var prop = pathArray.shift();\r\n\r\n\t// if (isModel(context)) {\r\n\t// \toptions.models.push({\r\n\t// \t\tpath: '',\r\n\t// \t\tproperty: prop,\r\n\t// \t\tmodel: context\r\n\t// \t});\r\n\t// }\r\n\r\n}\r\n\r\n\r\n","import setByPath from '../set-by-path/index.js';\r\n\r\nexport default function unFlat(obj) {\r\n\r\n\tif (obj == null || !_.isObject(obj)) return;\r\n\tvar res = {};\r\n\tfor (var e in obj) {\r\n\t\tsetByPath(res, e, obj[e]);\r\n\t}\r\n\treturn res;\r\n}\r\n\r\n","export default function compareObjects(objectA, objectB) {\r\n\r\n\tif (!_.isObject(objectA) || !_.isObject(objectB)) {\r\n\t\treturn objectA == objectB;\r\n\t}\r\n\tif ((_.isArray(objectA) && !_.isArray(objectB)) || (_.isArray(objectB) && !_.isArray(objectA))) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tif (typeof objectA != typeof objectB) return false;\r\n\r\n\tlet size = _.size(objectA);\r\n\tif(size != _.size(objectB)) return false;\r\n\r\n\tif (_.isArray(objectA)) {\r\n\t\tlet allvalues = _.uniq(objectA.concat(objectB));\r\n\t\treturn _.every(allvalues, value => {\r\n\t\t\tlet valuesA = _.filter(objectA, _v => _v == value);\r\n\t\t\tlet valuesB = _.filter(objectB, _v => _v == value);\r\n\t\t\tif (valuesA.length != valuesB.length) return false;\r\n\t\t\treturn compareObjects(valuesA[0], valuesB[0]);\r\n\t\t});\r\n\t} else {\r\n\t\tlet allkeys = _.uniq(_.keys(objectA).concat(_.keys(objectB)));\r\n\t\tif (allkeys.length != size) return false;\r\n\t\treturn _.every(allkeys, key => {\r\n\t\t\treturn compareObjects(objectA[key], objectB[key]);\r\n\t\t});\r\n\t}\r\n}\r\n","\r\nimport camelCase from '../camel-case/index.js';\r\nimport getOption from '../get-option/index.js';\r\n\r\nexport default function triggerMethod(event, ...args) {\r\n\t// get the method name from the event name\r\n\tconst methodName = camelCase('on:' + event);\r\n\tconst method = getOption(this, methodName, { force: false });\r\n\tlet result;\r\n  \r\n\t// call the onMethodName if it exists\r\n\tif (_.isFunction(method)) {\r\n\t\t// pass all args, except the event name\r\n\t\tresult = method.apply(this, args);\r\n\t}\r\n  \r\n\tif(_.isFunction(this.trigger)) {\r\n\t\t// trigger the event\r\n\t\tthis.trigger.apply(this, arguments);\r\n\t}\r\n  \r\n\treturn result;\r\n}\r\n\r\n\r\n","import triggerMethod from '../trigger-method/index.js';\r\n\r\nexport default function triggerMethodOn(context, event, ...args) {\r\n\treturn triggerMethod.call(context, event, ...args);\r\n}\r\n","export default function mergeOptions(options, keys) {\r\n\tif (!options) { return; }\r\n  \r\n\t_.each(keys, key => {\r\n\t\tconst option = options[key];\r\n\t\tif (option !== undefined) {\r\n\t\t\tthis[key] = option;\r\n\t\t}\r\n\t});\r\n}\r\n","import getOption from '../get-option/index.js';\r\nimport { isView, isViewClass } from 'bbmn-core';\r\n\r\nexport default function buildViewByKey(key, { TextView, options } = {}) {\r\n\t\r\n\tif(!_.isString(key)) { return; }\r\n\r\n\tlet view = getOption(this, key, { args: [ this ] });\r\n\tlet _options = getOption(this, key + 'Options', { args: [ this ] });\r\n\r\n\tif (TextView && _.isString(view)) {\r\n\t\t_options = _.extend({}, _options, { text: view });\r\n\t\tview = TextView;\r\n\t}\r\n\toptions = _.extend({}, options, _options);\r\n\r\n\tif (isView(view)) {\r\n\t\treturn view;\r\n\t} else if (isViewClass(view)) {\r\n\t\treturn new view(options);\r\n\t}\t\r\n}\r\n","import getFlag from '../get-flag/index.js';\r\nimport hasFlag from '../has-flag/index.js';\r\nimport getByPath from '../get-by-path/index.js';\r\nimport setByPath from '../set-by-path/index.js';\r\nimport isEmptyValue from '../is-empty-value/index.js';\r\nexport const enumsStore = {};\r\n\r\nfunction getEnum(arg){\r\n\tif(isEmptyValue(arg)){\r\n\t\treturn {};\r\n\t} else if(_.isString(arg)){\r\n\t\treturn getByPath(enumsStore, arg) || {};\r\n\t} else if(_.isObject(arg)){\r\n\t\treturn arg;\r\n\t}\r\n}\r\n\r\nexport function get(arg, flag, options){\r\n\tlet _enum = getEnum(arg);\r\n\treturn getFlag(_enum, flag, options);\r\n}\r\n\r\nexport function has(arg, flag, options){\r\n\tlet _enum = getEnum(arg);\r\n\treturn hasFlag(_enum, flag, options);\r\n}\r\n\r\nexport default {\r\n\tget,\r\n\thas,\r\n\tset(name, hash){\r\n\t\tif(_.isString(name)){\r\n\t\t\tsetByPath(enumsStore, name, hash);\r\n\t\t} else if (_.isObject(name)){\r\n\t\t\t_.extend(enumsStore, name);\r\n\t\t}\r\n\t},\r\n};\r\n","export default function skipTake(array, take, skip = 0){\r\n\tif (array == null) { return; }\r\n\tif (!_.isNumber(take) || _.isNumber(skip)) {\r\n\t\tthrow new Error('skipTake skip and take arguments must be a number');\r\n\t}\r\n\tif (!_.isArray(array) && _.isObject(array)) {\r\n\t\tarray = _.toArray(array);\r\n\t}\r\n\tlet length = take + skip;\r\n\tif(array.length < length) { length = array.length; }\r\n\tlet taken = [];\r\n\tfor (let x = skip; x < length; x++) {\r\n\t\ttaken.push(array[x]);\r\n\t}\r\n\treturn taken;\r\n}\r\n","import { flat, unflat } from '../index.js';\r\n\r\nexport default function mergeObject(src, dst){\r\n\tif (!_.isObject(src) || !_.isObject(dst)) {\r\n\t\treturn dst;\r\n\t}\r\n\tlet flatSrc = flat(src);\r\n\tlet flatDst = flat(dst);\r\n\t_.each(flatDst, (value, key) => {\r\n\t\tflatSrc[key] = value;\r\n\t});\r\n\treturn unflat(flatSrc);\r\n}\r\n"],"names":["MnObject","Mn","Object","isClass","arg","Base","_","isFunction","prototype","isModel","Model","isModelClass","isCollection","Collection","isCollectionClass","isView","BackboneView","isViewClass","View","extend","BaseClass","ctors","reduce","Router","Region","ctor","push","tryGetFromMn","each","ClassName","isKnownCtor","isFn","result","knownCtors","some","betterResult","obj","key","opts","context","args","checkAlso","force","defaultValue","default","isString","value","apply","isObject","alsoOptions","omit","camelCase","text","first","length","isBoolean","pop","filter","chunk","join","toString","replace","splitter","match","prefix","toUpperCase","toLowerCase","takeFirst","getModel","model","compareAB","a","b","func","isArray","every","f","call","getView","comparator","single","toNumber","isNumber","parseFloat","isNaN","undefined","trueValues","falseValues","alternative","returnValue","valueOrAlternative","nullable","nullValue","alts","alt","convertToBoolean","other","options","defaultOptions","strict","returnNullAs","returnEmptyAs","returnNullAndEmptyAs","returnAnyAs","returnOtherAs","isTrue","indexOf","isFalse","convertString","type","toBoolean","traverse","fields","root","babelHelpers.typeof","hash","attributes","props","getOwnPropertyNames","x","name","prop","Date","Array","flattenObject","res","getProperty","get","gettingByPath","getByPathArray","propertyName","pathArray","nextName","shift","getByPath","path","split","slice","getOption","also","_opts","deep","transformStringArray","arr","ignoreCase","toCamelCase","map","hasFlag","flag","has","all","rawflags","rawvalues","values","useObjectValues","v","keys","flags","intersection","isEmptyValue","allowWhiteSpace","trim","normalizeStringArray","item","compare","caseInsensitive","getFlag","returnAs","takeObjectKeys","delimeter","doNotPluck","method","founded","filtered","check","good","pluck","index","createMixinFromObject","mixedObj","clone","mixedCtor","constructor","mx","arguments","normalizeArguments","raw","wrap","wrapObjectWithConstructor","merge","mergeObjects","mixins","size","unshift","withMethod","Mixed","class","Memo","Ctor","mixed","mix","_ctor","Error","pstoSetPair","pair","keyvalue","pstoSetKeyValue","decodeURIComponent","paramsToObject","emptyObject","pairs","setProperty","set","silent","ensureSetByPathArguments","errors","setByPathArr","argumentsErrors","ensureArguments","modelContext","models","normalizeSetByPathOptions","ext","triggerModelEventsOnSetByPath","rest","pathChunks","trigger","property","setByPath","normalizeOptions","setByPathArray","unFlat","e","compareObjects","objectA","objectB","allvalues","uniq","concat","valuesA","_v","valuesB","allkeys","triggerMethod","event","methodName","triggerMethodOn","mergeOptions","option","buildViewByKey","TextView","view","_options","enumsStore","getEnum","_enum","skipTake","array","take","skip","toArray","taken","mergeObject","src","dst","flatSrc","flat","flatDst","unflat"],"mappings":";;;;;AAEA,IAAMA,WAAWC,YAAGC,MAAH,IAAaD,YAAGD,QAAjC;;ACCO,SAASG,OAAT,CAAiBC,GAAjB,EAAsBC,IAAtB,EAA2B;QAC1BC,EAAEC,UAAF,CAAaH,GAAb,MAAsBA,OAAOC,IAAP,IAAeD,IAAII,SAAJ,YAAyBH,IAA9D,CAAP;;;AAID,AAAO,SAASI,OAAT,CAAiBL,GAAjB,EAAqB;QACpBA,eAAeM,cAAtB;;;AAGD,AAAO,SAASC,YAAT,CAAsBP,GAAtB,EAA2B;QAC1BD,QAAQC,GAAR,EAAaM,cAAb,CAAP;;;AAID,AAAO,SAASE,YAAT,CAAsBR,GAAtB,EAA0B;QACzBA,eAAeS,mBAAtB;;AAED,AAAO,SAASC,iBAAT,CAA2BV,GAA3B,EAAgC;QAC/BD,QAAQC,GAAR,EAAaS,mBAAb,CAAP;;;AAID,AAAO,SAASE,MAAT,CAAgBX,GAAhB,EAAoB;QACnBA,eAAeY,aAAtB;;;AAID,AAAO,SAASC,WAAT,CAAqBb,GAArB,EAA0B;QACzBD,QAAQC,GAAR,EAAac,IAAb,CAAP;;;AAGD,AAAO,IAAMC,SAAST,eAAMS,MAArB;;AChCP,IAAMC,YAAY,SAASA,SAAT,GAAoB,EAAtC;AACAA,UAAUD,MAAV,GAAmBA,MAAnB;;ACAA,IAAME,QAAQf,EAAEgB,MAAF,CAAS,CACtBZ,cADsB,EACfG,mBADe,EACHG,aADG,EACWO,eADX,EACmBvB,QADnB,EAC6BwB,SAD7B,EACqCJ,SADrC,CAAT,EAEX,UAACC,KAAD,EAAQI,IAAR,EAAiB;KAChBnB,EAAEC,UAAF,CAAakB,IAAb,CAAH,EAAsB;QACfC,IAAN,CAAWD,IAAX;;CAJY,EAMX,EANW,CAAd;;AASA,IAAIE,eAAe,CAAC,aAAD,EAAgB,WAAhB,CAAnB;;AAEArB,EAAEsB,IAAF,CAAOD,YAAP,EAAqB,qBAAa;GAC/BpB,UAAF,CAAaN,YAAG4B,SAAH,CAAb,KAA+BR,MAAMK,IAAN,CAAWzB,YAAG4B,SAAH,CAAX,CAA/B;CADD;;ACZA,SAASC,WAAT,CAAqB1B,GAArB,EAA0B;KACrB2B,OAAOzB,EAAEC,UAAF,CAAaH,GAAb,CAAX;KACI4B,SAAS1B,EAAE2B,KAAF,EAAcC,IAAd,CAAmB,UAACT,IAAD;SAAUrB,QAAQqB,IAAR,IAAgBrB,IAAII,SAAJ,YAAyBiB,IAAnD;EAAnB,CAAb;QACOM,QAAQC,MAAf;;;ACJc,SAASG,YAAT,CAAsBC,GAAtB,EAA2BC,GAA3B,EACf;KAD+CC,IAC/C,uEADsD,EACtD;KACOC,OADP,GAC2CD,IAD3C,CACOC,OADP;KACgBC,IADhB,GAC2CF,IAD3C,CACgBE,IADhB;KACsBC,SADtB,GAC2CH,IAD3C,CACsBG,SADtB;KACiCC,KADjC,GAC2CJ,IAD3C,CACiCI,KADjC;;KAEKC,eAAeL,KAAKM,OAAxB;;KAEG,CAACtC,EAAEuC,QAAF,CAAWR,GAAX,CAAD,IAAoBA,QAAQ,EAA/B,EAAmC;;KAE/BS,QAAQ,CAACV,OAAO,EAAR,EAAYC,GAAZ,CAAZ;;KAEIS,SAAS,IAAT,KAAkB,CAACxC,EAAEC,UAAF,CAAauC,KAAb,CAAD,IAAwBhB,YAAYgB,KAAZ,CAA1C,CAAJ,EACC,OAAOA,KAAP;;KAEGd,SAASU,UAAU,KAAV,IAAmBpC,EAAEC,UAAF,CAAauC,KAAb,CAAnB,GAAyCA,MAAMC,KAAN,CAAYR,WAAWH,GAAvB,EAA4BI,IAA5B,CAAzC,GAA6EM,KAA1F;;KAEId,UAAU,IAAV,IAAkB1B,EAAE0C,QAAF,CAAWP,SAAX,CAAtB,EAA6C;MACxCQ,cAAc3C,EAAE4C,IAAF,CAAOZ,IAAP,EAAa,WAAb,CAAlB;WACSH,aAAaM,SAAb,EAAwBJ,GAAxB,EAA6BY,WAA7B,CAAT;;;KAGGjB,UAAU,IAAV,IAAkBW,gBAAgB,IAAtC,EACCX,SAASW,YAAT;;QAEMX,MAAP;;;ACvBD;;AAEA,AAAe,SAASmB,SAAT,GAA4B;;KAEtCC,aAAJ;KACIC,cAAJ;;mCAHoCb,IAAM;MAAA;;;KAKtC,CAACA,KAAKc,MAAV,EAAkB,OAAlB,KACK,IAAId,KAAKc,MAAL,IAAe,CAAnB,EAAsB;SACnBd,KAAK,CAAL,CAAP;EADI,MAEE;MACHlC,EAAEiD,SAAF,CAAYf,KAAKA,KAAKc,MAAL,GAAc,CAAnB,CAAZ,CAAH,EAAsC;WAC7Bd,KAAKgB,GAAL,EAAR;;SAEMlD,EAAEmD,MAAF,CAASjB,IAAT,EAAe;UAASkB,SAAS,IAAlB;GAAf,EAAuCC,IAAvC,CAA4C,GAA5C,CAAP;;;KAGG,CAACP,IAAL,EAAW,OAAOA,IAAP;;KAEP,CAAC9C,EAAEuC,QAAF,CAAWO,IAAX,CAAL,EAAuB,OAAOA,KAAKQ,QAAL,EAAP;QAChBR,KAAKS,OAAL,CAAa,UAAb,EAAwB,GAAxB,CAAP;KACIC,WAAWT,UAAU,IAAV,GAAiB,aAAjB,GAAiC,WAAhD;QACOD,KAAKS,OAAL,CAAaC,QAAb,EAAuB,UAACC,KAAD,EAAQC,MAAR,EAAgBZ,IAAhB;SAAyBA,KAAKa,WAAL,EAAzB;EAAvB,CAAP;KACG,CAACZ,KAAJ,EACCD,OAAOA,KAAKS,OAAL,CAAa,WAAb,EAA0B,UAACE,KAAD,EAAQC,MAAR,EAAgBZ,IAAhB;SAAyBA,KAAKc,WAAL,EAAzB;EAA1B,CAAP;QACMd,IAAP;;;ACzBc,SAASe,SAAT,CAAmB9B,GAAnB,EAAiC;KAC5C,CAAC/B,EAAEuC,QAAF,CAAWR,GAAX,CAAD,IAAoBA,QAAQ,EAA/B,EAAmC;KAC/BS,cAAJ;;mCAFyCN,IAAM;MAAA;;;GAG7CN,IAAF,CAAOM,IAAP,EAAa,eAAO;MACfH,QAAQjC,OAAO,EAAf,CAAJ,EAAwB;WACfA,IAAIiC,GAAJ,CAAR;UACO,IAAP;;EAHF;QAMOS,KAAP;;;ACPc,SAASsB,QAAT,CAAkBhE,GAAlB,EAAsB;;KAEhCK,QAAQL,GAAR,CAAJ,EAAkB;SAASA,GAAP;;;KAEhBW,OAAOX,GAAP,CAAJ,EAAiB;SAASA,IAAIiE,KAAX;;;;ACLL,SAASD,UAAT,CAAkBhE,GAAlB,EAAsB;QAC7BW,OAAOX,GAAP,KAAeA,GAAtB;;;ACCc,SAASkE,SAAT,CAAmBC,CAAnB,EAAsBC,CAAtB,EAAyBC,IAAzB,EAA8B;KACzCnE,EAAEoE,OAAF,CAAUD,IAAV,CAAH,EAAoB;;MAEfzC,SAAS,CAAb;;IAEEyC,IAAF,EAAQE,KAAR,CAAc,UAACC,CAAD,EAAO;YACXN,UAAUC,CAAV,EAAYC,CAAZ,EAAcI,CAAd,CAAT;UACO5C,WAAW,CAAlB;GAFD;;SAKOA,MAAP;EATD,MAUO;MACF1B,EAAEC,UAAF,CAAakE,IAAb,CAAJ,EAAwB;OACnBA,KAAKI,IAAL,CAAUN,CAAV,EAAaH,SAASG,CAAT,CAAb,EAA0BO,WAAQP,CAAR,CAA1B,CAAJ;OACIE,KAAKI,IAAL,CAAUL,CAAV,EAAaJ,SAASI,CAAT,CAAb,EAA0BM,WAAQN,CAAR,CAA1B,CAAJ;;;MAGGD,IAAIC,CAAR,EAAW,OAAO,CAAC,CAAR;MACPD,IAAIC,CAAR,EAAW,OAAO,CAAP;SACJ,CAAP;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrBa,SAASO,UAAT,GAA4B;KACtC/C,SAAS,CAAb;;;;mCADqCQ,IAAK;MAAA;;;KAItCA,KAAKc,MAAL,IAAe,CAAf,IAAoB,CAAChD,EAAEoE,OAAF,CAAUlC,KAAK,CAAL,CAAV,CAAzB,EAA4C;;SAEpC8B,UAAUvB,KAAV,CAAgB,IAAhB,EAAsBP,IAAtB,CAAP;;;;MAKI;;KAEFA,IAAF,EAAQmC,KAAR,CAAc,UAACK,MAAD,EAAY;;QAEtB,CAAC1E,EAAEoE,OAAF,CAAUM,MAAV,CAAJ,EAAuB,OAAO,IAAP;aACdV,6CAAaU,MAAb,EAAT;WACOhD,WAAW,CAAlB;IAJD;;;QASMA,MAAP;;;ACvBc,SAASiD,QAAT,CAAkB7B,IAAlB,EAAuB;KAClC9C,EAAE4E,QAAF,CAAW9B,IAAX,CAAH,EAAqB,OAAOA,IAAP;KAClB,CAAC9C,EAAEuC,QAAF,CAAWO,IAAX,CAAJ,EAAsB;;KAElBN,QAAQqC,WAAW/B,IAAX,EAAiB,EAAjB,CAAZ;KACGgC,MAAMtC,KAAN,CAAH,EACCA,QAAQuC,SAAR;;QAEMvC,KAAP;;;ACRD,qBAAe;WACJ,IADI;SAEN,KAFM;eAGAuC,SAHA;gBAICA,SAJD;uBAKQA,SALR;cAMDA,SANC;gBAOCA;CAPhB;;ACEA,IAAMC,aAAa,CAAC,MAAD,EAAQ,GAAR,EAAY,IAAZ,EAAiB,KAAjB,CAAnB;AACA,IAAMC,cAAc,CAAC,OAAD,EAAS,GAAT,EAAa,IAAb,CAApB;;AAEA,IAAMC,cAAc,SAAdA,WAAc,GAAkB;KACjCC,oBAAJ;;mCAD+BjD,IAAM;MAAA;;;GAEnCA,IAAF,EAAQN,IAAR,CAAa,eAAO;MAChB5B,EAAEiD,SAAF,CAAYnD,GAAZ,CAAH,EAAqB;iBACNA,GAAd;UACO,IAAP;;EAHF;QAMOqF,WAAP;CARD;;AAWA,IAAMC,qBAAqB,SAArBA,kBAAqB,CAASC,QAAT,EAAmBC,SAAnB,EAA8B9C,KAA9B,EAA6C;oCAAL+C,IAAK;MAAA;;;KACnEC,MAAMN,6BAAeK,IAAf,CAAV;KACIC,OAAO,IAAX,EACC,OAAOA,GAAP,CADD,KAEK,IAAIH,QAAJ,EACJ,OAAOC,SAAP,CADI,KAGJ,OAAO9C,KAAP;CAPF;;AAUA,IAAMiD,mBAAmB,SAAnBA,gBAAmB,CAAU3F,GAAV,EACzB;KADwCkC,IACxC,uEAD+C,EAC/C;;;KAEK0D,cAAJ;KACIC,UAAU3F,EAAEa,MAAF,CAAS,EAAT,EAAa+E,cAAb,EAA6B5D,IAA7B,CAAd;KAECqD,QALF,GAQKM,OARL,CAKEN,QALF;KAKYQ,MALZ,GAQKF,OARL,CAKYE,MALZ;KAMEC,YANF,GAQKH,OARL,CAMEG,YANF;KAMgBC,aANhB,GAQKJ,OARL,CAMgBI,aANhB;KAM+BC,oBAN/B,GAQKL,OARL,CAM+BK,oBAN/B;KAOEC,WAPF,GAQKN,OARL,CAOEM,WAPF;KAOeC,aAPf,GAQKP,OARL,CAOeO,aAPf;;;KAYKpG,OAAO,IAAX,EAAiB;SACTsF,mBAAmBC,QAAnB,EAA6BN,SAA7B,EAAwC,KAAxC,EAA+Ce,YAA/C,EAA6DE,oBAA7D,CAAP;EADD,MAGK,IAAIlG,QAAQ,EAAZ,EAAgB;SACbsF,mBAAmBC,QAAnB,EAA6BN,SAA7B,EAAwC,KAAxC,EAA+CgB,aAA/C,EAA8DC,oBAA9D,CAAP;EADI,MAEE,IAAIhG,EAAEiD,SAAF,CAAYnD,GAAZ,CAAJ,EAAsB;SACrBA,GAAP;;;;;SAKO+F,SACJR,WAAWN,SAAX,GAAuB,KADnB,GAEL,IAFH;;KAKIjC,OAAOhD,IAAIwD,QAAJ,GAAeM,WAAf,EAAX;KACIuC,SAASV,iBAAiBT,UAAjB,CAA4BoB,OAA5B,CAAoCtD,IAApC,IAA4C,CAAC,CAA1D;KACIuD,UAAUZ,iBAAiBR,WAAjB,CAA6BmB,OAA7B,CAAqCtD,IAArC,IAA6C,CAAC,CAA5D;;KAGI9C,EAAEiD,SAAF,CAAYgD,WAAZ,CAAJ,EAA8B;SACtBA,WAAP;EADD,MAEO,IAAIjG,EAAEiD,SAAF,CAAYiD,aAAZ,CAAJ,EAAgC;UAC9BA,aAAR;;;QAGMC,SACJ,IADI,GAEJE,UACC,KADD,GAECX,KAJJ;CAxCD;;AA+CAD,iBAAiBT,UAAjB,GAA8BA,UAA9B;AACAS,iBAAiBR,WAAjB,GAA+BA,WAA/B;;ACtEA;AACA,AAAe,SAASqB,aAAT,CAAuBxD,IAAvB,EAA6ByD,IAA7B,EAAmCvE,IAAnC,EAAyC;;SAEhDuE,IAAP;OACK,QAAL;UACQ5B,SAAS7B,IAAT,EAAed,IAAf,CAAP;OACI,SAAL;UACQwE,iBAAU1D,IAAV,EAAgBd,IAAhB,CAAP;;UAEOc,IAAP;;;;ACZa,SAAS2D,QAAT,CAAkBC,MAAlB,EAA0BC,IAA1B,EACf;QACQA,QAAQ,EAAf;KACI,QAAQ,IAAR,IAAgBC,QAAO,IAAP,KAAe,QAAnC,EAA6C;;;;KAIzCC,OAAO1G,QAAQ,IAAR,IAAgB,KAAK2G,UAArB,GAAkC,IAA7C;;KAEIC,QAAQnH,OAAOoH,mBAAP,CAA2BH,IAA3B,CAAZ;;MAEK,IAAII,IAAI,CAAb,EAAgBA,IAAIF,MAAM/D,MAA1B,EAAkCiE,GAAlC,EAAuC;MAClCC,OAAOH,MAAME,CAAN,CAAX;MACIE,OAAO,KAAKD,IAAL,CAAX;;MAEIC,QAAQ,IAAR,IAAgB,QAAOA,IAAP,yCAAOA,IAAP,MAAe,QAA/B,IAA4CA,gBAAgBC,IAAhB,IAAwBD,gBAAgBE,KAAxF,EAAgG;;UAExFV,OAAOO,IAAd,IAAsBC,IAAtB;GAFD,MAIK,IAAI,QAAOA,IAAP,yCAAOA,IAAP,MAAe,QAAnB,EAA6B;;YAExB5C,IAAT,CAAc4C,IAAd,EAAoBT,MAApB,EAA4BC,OAAOO,IAAP,GAAc,GAA1C;;;;;ACpBY,SAASI,aAAT,CAAuBxF,GAAvB,EAA4B;KACtCA,OAAO,IAAP,IAAe,CAAC9B,EAAE0C,QAAF,CAAWZ,GAAX,CAApB,EAAqC;KACjCyF,MAAM,EAAV;UACShD,IAAT,CAAczC,GAAd,EAAmByF,GAAnB;QACOA,GAAP;;;ACLD,SAASC,WAAT,CAAqBvF,OAArB,EAA8BiF,IAA9B,EACA;KACIjF,WAAW,IAAX,IAAmB,CAACjC,EAAE0C,QAAF,CAAWT,OAAX,CAApB,IAA2CiF,QAAQ,IAAnD,IAA2DA,QAAQ,EAAtE,EAA0E;KACtE/G,QAAQ8B,OAAR,CAAJ,EACC,OAAOA,QAAQwF,GAAR,CAAYP,IAAZ,EAAkB,EAAEQ,eAAe,IAAjB,EAAlB,CAAP,CADD,KAGC,OAAOzF,QAAQiF,IAAR,CAAP;;;ACJF,SAASS,cAAT,CAAwB1F,OAAxB,EAAiC2F,YAAjC,EAA+CC,SAA/C,EAA0D;;KAErD5F,WAAW,IAAX,IAAmB,CAACjC,EAAE0C,QAAF,CAAWT,OAAX,CAApB,IAA2C2F,gBAAgB,IAA3D,IAAmEA,gBAAgB,EAAvF,EACC;;KAEGT,OAAOK,YAAYvF,OAAZ,EAAqB2F,YAArB,CAAX;;KAEI,CAACC,UAAU7E,MAAX,IAAsB6E,UAAU7E,MAAV,IAAoBmE,QAAQ,IAAtD,EACC,OAAOA,IAAP;;KAEGW,WAAWD,UAAUE,KAAV,EAAf;;QAEOJ,eAAeR,IAAf,EAAqBW,QAArB,EAA+BD,SAA/B,CAAP;;;ACbc,SAASG,SAAT,CAAmBlG,GAAnB,EAAwBmG,IAAxB,EAA8B;;KAExCnG,OAAO,IAAP,IAAe,CAAC9B,EAAE0C,QAAF,CAAWZ,GAAX,CAAhB,IAAmCmG,QAAQ,IAA3C,IAAmDA,QAAQ,EAA/D,EAAmE;;KAE/DJ,YAAY7H,EAAEuC,QAAF,CAAW0F,IAAX,IAAmBA,KAAKC,KAAL,CAAW,GAAX,CAAnB,GACblI,EAAEoE,OAAF,CAAU6D,IAAV,IAAkB,GAAGE,KAAH,CAAS5D,IAAT,CAAc0D,IAAd,CAAlB,GACC,CAACA,IAAD,CAFJ;;KAIId,OAAOU,UAAUE,KAAV,EAAX;;QAEOJ,eAAe7F,GAAf,EAAoBqF,IAApB,EAA0BU,SAA1B,CAAP;;;ACVc,SAASO,SAAT,GAAkD;KAA/BnG,OAA+B,uEAArB,EAAqB;KAAjBF,GAAiB;KAAZC,IAAY;KAANqG,IAAM;;;KAE7DrI,EAAE0C,QAAF,CAAWX,GAAX,KAAmB/B,EAAEuC,QAAF,CAAWP,IAAX,CAAtB,EAAuC;MAClCsG,QAAQD,IAAZ;SACOtG,GAAP;QACMC,IAAN;SACOsG,KAAP;;;KAGG3C,UAAU3F,EAAEa,MAAF,CAAS,EAAEqB,MAAK,CAACD,OAAD,CAAP,EAAkBA,gBAAlB,EAAT,EAAsCD,IAAtC,EAA4C,EAAEM,SAAS,IAAX,EAA5C,CAAd;KACMiG,IAV0D,GAUjD5C,OAViD,CAU1D4C,IAV0D;;KAW5DlG,eAAeL,QAAQA,KAAKM,OAAhC;;KAEIE,QAAQd,aAAOO,QAAQ0D,OAAR,IAAmB0C,IAA1B,EAAgCtG,GAAhC,EAAqC4D,OAArC,CAAZ;KACInD,SAAS,IAAT,IAAiB+F,SAAS,KAA9B,EAAqC;UAC5B7G,aAAOO,OAAP,EAAgBF,GAAhB,EAAqB4D,OAArB,CAAR;;;QAGMnD,SAAS,IAAT,GAAgBA,KAAhB,GAAwBH,YAA/B;;;ACnBD,SAASmG,oBAAT,CAA8BC,GAA9B,EAA6C;KAAVzG,IAAU,uEAAH,EAAG;wBACKA,IADL,CACtC0G,UADsC;KACtCA,UADsC,oCACzB,IADyB;yBACK1G,IADL,CACnB2G,WADmB;KACnBA,WADmB,qCACL,KADK;;QAErC3I,EAAEyI,GAAF,EAAOG,GAAP,CAAW,iBAAS;MACtBF,UAAJ,EACC,OAAOlG,MAAMoB,WAAN,EAAP,CADD,KAEK,IAAI+E,WAAJ,EACJ,OAAO9F,UAAUL,KAAV,CAAP,CADI,KAGJ,OAAOA,KAAP;EANK,CAAP;;AASD,AAAe,SAASqG,OAAT,CAAiBrG,KAAjB,EAAwBsG,IAAxB,EAAwC;KAAV9G,IAAU,uEAAH,EAAG;;KAClDQ,SAAS,IAAT,IAAiBsG,QAAQ,IAA7B,EAAmC,OAAO,KAAP;;;;;;KAM/B9I,EAAE4E,QAAF,CAAWpC,KAAX,KAAqBxC,EAAE4E,QAAF,CAAWkE,IAAX,CAAzB,EAA2C;MACtCC,MAAMvG,QAAQsG,IAAlB;SACO9G,KAAKgH,GAAL,KAAa,IAAb,GAAoBD,QAAQD,IAA5B,GAAmCC,MAAM,CAAhD;EAFD,MAGO,IAAK/I,EAAE4E,QAAF,CAAWpC,KAAX,KAAqB,CAACxC,EAAE4E,QAAF,CAAWkE,IAAX,CAAvB,IAA6C,CAAC9I,EAAE4E,QAAF,CAAWpC,KAAX,CAAD,IAAsBxC,EAAE4E,QAAF,CAAWkE,IAAX,CAAvE,EAA0F;SACzF,KAAP;;;KAGG,CAAC9I,EAAEoE,OAAF,CAAU0E,IAAV,CAAL,EAAsB;SAASA,KAAKxF,QAAL,EAAP;;KACpB,CAACtD,EAAEuC,QAAF,CAAWuG,IAAX,CAAD,IAAqB,CAAC9I,EAAEoE,OAAF,CAAU0E,IAAV,CAA1B,EAA2C;SAAS,KAAP;;;KAEzCG,WAAWjJ,EAAEoE,OAAF,CAAU0E,IAAV,IACZA,IADY,GAEZA,KAAKZ,KAAL,CAAW,SAAX,CAFH;;KAKIgB,kBAAJ;KACGlJ,EAAEuC,QAAF,CAAWC,KAAX,CAAH,EAAqB;cACRA,MAAM0F,KAAN,CAAY,SAAZ,CAAZ;EADD,MAEO,IAAGlI,EAAEoE,OAAF,CAAU5B,KAAV,CAAH,EAAoB;cACd2G,MAAZ;EADM,MAEA,IAAGnJ,EAAE0C,QAAF,CAAWF,KAAX,CAAH,EAAsB;cAChBR,KAAKoH,eAAL,GACTpJ,EAAE4I,GAAF,CAAMpG,KAAN,EAAa;UAAK6G,CAAL;GAAb,CADS,GAETrJ,EAAEsJ,IAAF,CAAO9G,KAAP,CAFH;EADM,MAIA;SACC,KAAP;;;KAGG+G,QAAQf,qBAAqBS,QAArB,EAA+BjH,IAA/B,CAAZ;KACImH,SAASX,qBAAqBU,SAArB,EAAgClH,IAAhC,CAAb;;KAEIwH,eAAexJ,EAAEwJ,YAAF,CAAeL,MAAf,EAAuBI,KAAvB,CAAnB;KACIC,aAAaxG,MAAb,IAAuB,CAA3B,EAA8B,OAAO,KAAP;KAC1BwG,aAAaxG,MAAb,IAAuBuG,MAAMvG,MAAjC,EAAyC,OAAO,IAAP;QAClChB,KAAKgH,GAAL,IAAY,IAAnB;;;;;;;;;;ACrDc,SAASS,YAAT,CAAsB3J,GAAtB,EAA6D;gFAAJ,EAAI;iCAAhC4J,eAAgC;KAAhCA,eAAgC,wCAAd,KAAc;;KACvE5J,OAAO,IAAP,IAAeE,EAAE8E,KAAF,CAAQhF,GAAR,CAAnB,EAAiC,OAAO,IAAP;KAC7B,CAACE,EAAEuC,QAAF,CAAWzC,GAAX,CAAL,EAAsB,OAAO,KAAP;KAClBA,QAAQ,EAAZ,EAAgB,OAAO,IAAP;;QAET,CAAC4J,eAAD,IAAoB5J,IAAI6J,IAAJ,OAAe,EAA1C;;;ACHD,SAASC,oBAAT,CAA8BnB,GAA9B,EAAkC;QAC1BzI,EAAEgB,MAAF,CAASyH,GAAT,EAAc,UAAC/G,MAAD,EAAQmI,IAAR,EAAiB;MAClCA,QAAQ,IAAX,EAAiB;SACVzI,IAAP,CAAYyI,KAAKvG,QAAL,EAAZ;SACO5B,MAAP;EAHM,EAIJ,EAJI,CAAP;;;AAOD,SAASoI,OAAT,CAAiB7F,CAAjB,EAAoBC,CAApB,EAAoC;KAAbyB,OAAa,uEAAH,EAAG;;KAC/B1B,KAAK,IAAT,EAAe;SACP,KAAP;;6BAEgC0B,OAJE,CAI7BoE,eAJ6B;KAI7BA,eAJ6B,yCAIX,IAJW;;KAK/B,CAAC/J,EAAEuC,QAAF,CAAW0B,CAAX,CAAL,EAAoB;MACfA,EAAEX,QAAF,EAAJ;;KAEEyG,eAAH,EAAoB;MACf9F,EAAEL,WAAF,EAAJ;MACIM,EAAEN,WAAF,EAAJ;;QAEMK,MAAMC,CAAb;;;AAGD,AAAe,SAAS8F,OAAT,CAAiBxH,KAAjB,EAAwBsG,IAAxB,EAA2C;KAAbnD,OAAa,uEAAH,EAAG;;KACrD4D,cAAJ;KACIE,aAAajH,KAAb,KAAuBiH,aAAaX,IAAb,CAA3B,EAA+C;;;KACzCmB,QAHmD,GAG8BtE,OAH9B,CAGnDsE,QAHmD;KAGzCb,eAHyC,GAG8BzD,OAH9B,CAGzCyD,eAHyC;KAGxBc,cAHwB,GAG8BvE,OAH9B,CAGxBuE,cAHwB;KAGRlB,GAHQ,GAG8BrD,OAH9B,CAGRqD,GAHQ;0BAG8BrD,OAH9B,CAGHwE,SAHG;KAGHA,SAHG,sCAGS,IAHT;KAGeC,UAHf,GAG8BzE,OAH9B,CAGeyE,UAHf;;KAItDpK,EAAEuC,QAAF,CAAWuG,IAAX,CAAH,EAAoB;UACXc,qBAAqBd,KAAKZ,KAAL,CAAW,YAAX,CAArB,EAA+CvC,OAA/C,CAAR;EADD,MAEM,IAAG3F,EAAEoE,OAAF,CAAU0E,IAAV,CAAH,EAAoB;UACjBc,qBAAqBd,IAArB,EAA2BnD,OAA3B,CAAR;EADK,MAEC;;;KAGHsE,YAAY,IAAhB,EAAsB;aACVjK,EAAEoE,OAAF,CAAU0E,IAAV,IAAkB,OAAlB,GAA4B,QAAvC;;KAEE9I,EAAEuC,QAAF,CAAWC,KAAX,CAAH,EAAsB;UACboH,qBAAqBpH,MAAM0F,KAAN,CAAY,YAAZ,CAArB,EAAgDvC,OAAhD,CAAR;;KAEGvB,UAAUpE,EAAEoE,OAAF,CAAU5B,KAAV,CAAd;KACI6H,SAASrB,MAAM,OAAN,GAAgB,MAA7B;KACIsB,UAAUtK,EAAEgB,MAAF,CAASwB,KAAT,EAAgB,UAAC+H,QAAD,EAAWV,IAAX,EAAiB9H,GAAjB,EAAyB;MAClDyI,QAAQX,IAAZ;MACG,CAACzF,OAAD,IAAY,CAACgF,eAAhB,EAAgC;WACvBrH,GAAR;;;MAGG0I,OAAOzK,EAAEqK,MAAF,EAAUd,KAAV,EAAiB;UAAQO,QAAQU,KAAR,EAAe1B,IAAf,EAAqBnD,OAArB,CAAR;GAAjB,CAAX;;MAEI,CAAC8E,IAAL,EAAW;UAASF,QAAP;;;MAETnG,OAAJ,EAAa;YACHhD,IAAT,CAAcoJ,KAAd;GADD,MAEO;YACGpJ,IAAT,CAAc,EAACoB,OAAOqH,IAAR,EAAc9H,QAAd,EAAd;;SAEMwI,QAAP;EAfa,EAgBX,EAhBW,CAAd;;;KAmBIN,aAAa,QAAjB,EAA2B;MACtB7F,OAAJ,EAAa;UACLkG,QAAQjH,IAAR,CAAa8G,SAAb,CAAP;GADD,MAEO;OACFpI,MAAMmI,iBAAiB,KAAjB,GAAyB,OAAnC;UACOlK,EAAE0K,KAAF,CAAQJ,OAAR,EAAiBvI,GAAjB,EAAsBsB,IAAtB,CAA2B8G,SAA3B,CAAP;;EALF,MAOO,IAAGF,aAAa,OAAhB,EAAwB;MAC1B7F,WAAWgG,UAAf,EAA2B;UACnBE,OAAP;GADD,MAEO;OACFvI,OAAMmI,iBAAiB,KAAjB,GAAyB,OAAnC;UACOlK,EAAE0K,KAAF,CAAQJ,OAAR,EAAiBvI,IAAjB,CAAP;;EALK,MAOA,IAAGkI,aAAa,QAAhB,EAA0B;SACzBjK,EAAEgB,MAAF,CAASsJ,OAAT,EAAkB,UAAC5I,MAAD,EAASmI,IAAT,EAAec,KAAf,EAAyB;OAC7CnI,QAAQ4B,UACTyF,IADS,GAETK,iBAAiBL,KAAK9H,GAAtB,GAA4B8H,KAAKrH,KAFpC;OAGIT,MAAMqC,UACPuG,KADO,GAEPT,iBAAiBL,KAAKrH,KAAtB,GAA8BqH,KAAK9H,GAFtC;UAGOA,GAAP,IAAcS,KAAd;UACOd,MAAP;GARM,EASJ,EATI,CAAP;;;;AC9EF,uBAAe;eACA,IADA;4BAEa;CAF5B;;ACAe,SAASkJ,qBAAT,CAA+B9K,GAA/B,EAAoC;KAC9C+K,WAAW7K,EAAE8K,KAAF,CAAQhL,GAAR,CAAf;KACIiL,YAAY/K,EAAEC,UAAF,CAAa4K,SAASG,WAAtB,KAAsCH,SAASG,WAA/D;QACO,gBAAQ;MACVhL,EAAEC,UAAF,CAAa8K,SAAb,CAAJ,EAA6B;;YAEnBC,WAAT,GAAuB,SAASC,EAAT,GAAa;SAC9BxI,KAAL,CAAW,IAAX,EAAiByI,SAAjB;cACUzI,KAAV,CAAgB,IAAhB,EAAsByI,SAAtB;IAFD;;SAKMnL,KAAKc,MAAL,CAAYgK,QAAZ,CAAP;EARD;;;ACAc,SAASM,kBAAT,CAA4BjJ,IAA5B,EAA6C;KAAXF,IAAW,uEAAJ,EAAI;;KACvDoJ,MAAM,EAAV;KACIC,OAAOrJ,KAAKsJ,yBAAL,IAAkC,IAA7C;KACIC,QAAQvJ,KAAKwJ,YAAL,IAAqB,IAAjC;KACIC,SAAS,EAAb;GACEvJ,IAAF,EAAQZ,IAAR,CAAa,eAAO;;;;MAIftB,EAAEC,UAAF,CAAaH,GAAb,CAAJ,EAAuB;UACfsB,IAAP,CAAYtB,GAAZ;;;;;MAKG,CAACE,EAAE0C,QAAF,CAAW5C,GAAX,CAAL,EAAsB;;;;;;MAMlB,CAACyL,KAAD,IAAWF,QAAQrL,EAAEC,UAAF,CAAaH,IAAIkL,WAAjB,CAAvB,EAAuD;UAC/C5J,IAAP,CAAYwJ,sBAAsB9K,GAAtB,CAAZ;GADD,MAGK;KACFe,MAAF,CAASuK,GAAT,EAActL,GAAd;;EApBF;;;;;KA4BIE,EAAE0L,IAAF,CAAON,GAAP,CAAJ,EACCK,OAAOE,OAAP,CAAef,sBAAsBQ,GAAtB,CAAf;;QAEMK,MAAP;;;ACnCc,SAASG,UAAT,GAA6B;mCAAN1J,IAAM;MAAA;;;KAEvCuJ,SAASN,mBAAmBjJ,IAAnB,EAAyB,KAAKyD,OAA9B,CAAb;KACIkG,QAAQ,KAAKC,KAAjB;KACI,CAACL,OAAOzI,MAAZ,EAAoB,OAAO6I,KAAP,CAApB,KAEC,OAAO7L,EAAEgB,MAAF,CAASyK,MAAT,EAAiB,UAACM,IAAD,EAAOC,IAAP,EAAgB;MACnCC,QAAQD,KAAKD,IAAL,CAAZ;SACOE,KAAP;EAFM,EAGJJ,KAHI,CAAP;;;ACHa,SAASK,GAAT,CAAaC,KAAb,EAAoBxG,OAApB,EAA6B;;KAEvC3D,OAAOhC,EAAEa,MAAF,CAAS,EAAT,EAAa+E,gBAAb,EAA6BD,OAA7B,CAAX;;KAEIxE,aAAJ;;KAEInB,EAAEC,UAAF,CAAakM,KAAb,CAAJ,EAAyB;SACjBA,KAAP;EADD,MAGK,IAAInM,EAAE0C,QAAF,CAAWyJ,KAAX,CAAJ,EAAuB;MACvBjI,IAAIlE,EAAEC,UAAF,CAAakM,MAAMnB,WAAnB,KAAmCmB,MAAMnB,WAAjD;SACO,SAASC,EAAT,GAAc;KAAIxI,KAAF,CAAQ,IAAR,EAAcyI,SAAd;GAAvB;IACErK,MAAF,CAASM,KAAKjB,SAAd,EAAyBF,EAAE4C,IAAF,CAAOuJ,KAAP,EAAa,aAAb,CAAzB;EAHI,MAKE;QACA,IAAIC,KAAJ,CAAU,kDAAV,CAAN;;;KAGG,CAACpM,EAAEC,UAAF,CAAakB,KAAKN,MAAlB,CAAL,EACCM,KAAKN,MAAL,GAAcA,MAAd;;QAEM;WACGmB,IADH;QAEA4J,UAFA;SAGCzK;EAHR;;;AC5BD,SAASkL,WAAT,CAAqBpK,OAArB,EAA8BqK,IAA9B,EAAmC;KAC/B,CAACtM,EAAEuC,QAAF,CAAW+J,IAAX,CAAJ,EAAsB;KAClBC,WAAWD,KAAKpE,KAAL,CAAW,GAAX,CAAf;KACInG,MAAMwK,SAASxE,KAAT,EAAV;KACIvF,QAAQ+J,SAASlJ,IAAT,CAAc,GAAd,CAAZ;iBACgBpB,OAAhB,EAAyBF,GAAzB,EAA8BS,KAA9B;;;AAGD,SAASgK,eAAT,CAAyBvK,OAAzB,EAAkCF,GAAlC,EAAuCS,KAAvC,EAA6C;;KAExCT,OAAO,IAAX,EAAiB;OACX0K,mBAAmB1K,GAAnB,CAAN;UACS,IAAT,KAAkBS,QAAQiK,mBAAmBjK,KAAnB,CAA1B;;KAEG,EAAET,OAAOE,OAAT,CAAH,EACC,OAAQA,QAAQF,GAAR,IAAeS,KAAvB;;EAEAxC,EAAEoE,OAAF,CAAUnC,QAAQF,GAAR,CAAV,CAAD,KAA6BE,QAAQF,GAAR,IAAe,CAACE,QAAQF,GAAR,CAAD,CAA5C;;SAEQA,GAAR,EAAaX,IAAb,CAAkBoB,KAAlB;;QAEOP,QAAQF,GAAR,CAAP;;;AAGD,AAAe,SAAS2K,cAAT,CAAwBtB,GAAxB,EAAwD;KAA3BpJ,IAA2B,uEAApB,EAAC2K,aAAa,IAAd,EAAoB;;KAClEjL,SAAS,EAAb;KACG,CAAC1B,EAAEuC,QAAF,CAAW6I,GAAX,CAAJ,EAAqB,OAAOpJ,KAAK2K,WAAL,GAAmBjL,MAAnB,GAA4B0J,GAAnC;;KAEjBwB,QAAQxB,IAAIlD,KAAJ,CAAU,GAAV,CAAZ;GACE0E,KAAF,EAAStL,IAAT,CAAc,UAACgL,IAAD;SAAUD,YAAY3K,MAAZ,EAAoB4K,IAApB,CAAV;EAAd;;QAEO5K,MAAP;;;AC5BD,SAASmL,WAAT,CAAqB5K,OAArB,EAA8BiF,IAA9B,EAAoC1E,KAApC,EAA2C;KACtCrC,QAAQ8B,OAAR,CAAJ,EAAsB;UACb6K,GAAR,CAAY5F,IAAZ,EAAkB1E,KAAlB,EAAyB,EAAEuK,QAAQ,IAAV,EAAzB;EADD,MAGK;UACI7F,IAAR,IAAgB1E,KAAhB;;;QAGMgF,YAAYvF,OAAZ,EAAqBiF,IAArB,CAAP;;;ACXc,SAAS8F,wBAAT,CAAkC/K,OAAlC,EAA2CgG,IAA3C,EACf;KACKgF,SAAS,EAAb;KACIhL,WAAW,IAAX,IAAmB,CAACjC,EAAE0C,QAAF,CAAWT,OAAX,CAAxB,EAA6C;SACrCb,IAAP,CAAY,IAAIgL,KAAJ,CAAU,0BAAV,CAAZ;;KAEG,CAACpM,EAAEuC,QAAF,CAAW0F,IAAX,CAAD,IAAqBA,SAAS,EAAlC,EAAsC;SAC9B7G,IAAP,CAAY,IAAIgL,KAAJ,CAAU,sBAAV,CAAZ;;KAEGa,OAAOjK,MAAX,EAAmB;SACXiK,MAAP;;;;ACNa,SAASC,YAAT,CAAsBjL,OAAtB,EAA+B2F,YAA/B,EAA6CC,SAA7C,EAAwDrF,KAAxD,EAA+DmD,OAA/D,EAAwE;;KAElFwH,kBAAkBC,yBAAgBnL,OAAhB,EAAyB2F,YAAzB,CAAtB;KACIuF,eAAJ,EAAqB;;;;KAIjBE,qBAAJ;KACIlN,QAAQ8B,OAAR,CAAJ,EAAsB;iBACN;UACPA,OADO;aAEJ2F,YAFI;eAGF,GAAGO,KAAH,CAAS5D,IAAT,CAAcsD,SAAd;GAHb;;;;KAQG,CAACA,UAAU7E,MAAf,EAAuB;;kBAEN2C,QAAQ2H,MAAR,CAAelM,IAAf,CAAoBiM,YAApB,CAAhB;;SAEOR,YAAY5K,OAAZ,EAAqB2F,YAArB,EAAmCpF,KAAnC,EAA0CmD,OAA1C,CAAP;EAJD,MAMO;;MAEFwB,OAAOK,YAAYvF,OAAZ,EAAqB2F,YAArB,CAAX;;MAEI,CAAC5H,EAAE0C,QAAF,CAAWyE,IAAX,CAAD,IAAqB,CAACxB,QAAQvD,KAAlC,EAAyC;;GAAzC,MAEO,IAAI,CAACpC,EAAE0C,QAAF,CAAWyE,IAAX,CAAD,IAAqBxB,QAAQvD,KAAjC,EAAwC;UACvCyK,YAAY5K,OAAZ,EAAqB2F,YAArB,EAAmC,EAAnC,EAAuCjC,OAAvC,CAAP;;;kBAGeA,QAAQ2H,MAAR,CAAelM,IAAf,CAAoBiM,YAApB,CAAhB;;MAEIvF,WAAWD,UAAUE,KAAV,EAAf;SACOmF,aAAa/F,IAAb,EAAmBW,QAAnB,EAA6BD,SAA7B,EAAwCrF,KAAxC,EAA+CmD,OAA/C,CAAP;;;;ACxCa,SAAS4H,yBAAT,GACf;KADkDvL,IAClD,uEADyD,EACzD;KAD6DwL,GAC7D;;;KAEK7H,UAAU3F,EAAEa,MAAF,CAAS,EAAT,EAAamB,IAAb,EAAmBwL,GAAnB,EAAwB;UAC7BxL,KAAK+K,MAAL,KAAgB,IADa;SAE9B/K,KAAKI,KAAL,KAAe,KAFe;;UAI7B;EAJK,CAAd;;QAOOuD,OAAP;;;ACVc,SAAS8H,6BAAT,CAAuCjL,KAAvC,EACf;KAD6DmD,OAC7D,uEADuE,EACvE;;KACKA,QAAQoH,MAAR,IAAkB,CAACpH,QAAQ2H,MAAR,CAAetK,MAAtC,EAA8C;;;;GAI5C2C,QAAQ2H,MAAV,EAAkBhM,IAAlB,CAAuB,mBAAW;MAC7BoM,OAAOzL,QAAQ0L,UAAR,CAAmBtK,IAAnB,CAAwB,GAAxB,CAAX;MACIqK,IAAJ,EAAU;WACD3J,KAAR,CAAc6J,OAAd,aAAgC3L,QAAQ4L,QAAxC,SAAoDH,IAApD,EAA4DzL,QAAQ8B,KAApE,EAA2EvB,KAA3E;;UAEOuB,KAAR,CAAc6J,OAAd,aAAgC3L,QAAQ4L,QAAxC,EAAoD5L,QAAQ8B,KAA5D,EAAmEvB,KAAnE;UACQuB,KAAR,CAAc6J,OAAd,CAAsB,QAAtB,EAAgC3L,QAAQ8B,KAAxC;EAND;;;ACFc,SAAS+J,SAAT,CAAmB7L,OAAnB,EAA4BgG,IAA5B,EAAkCzF,KAAlC,EAAoD;KAAXR,IAAW,uEAAJ,EAAI;;;KAE9DmL,kBAAkBC,yBAAgBnL,OAAhB,EAAyBgG,IAAzB,CAAtB;KACIkF,eAAJ,EAAqB;SACb3K,KAAP;;;KAGGqF,YAAYI,KAAKC,KAAL,CAAW,GAAX,CAAhB;KACIvC,UAAUoI,0BAAiB/L,IAAjB,EAAuB,EAAEiG,UAAF,EAAQJ,WAAW,GAAGM,KAAH,CAAS5D,IAAT,CAAcsD,SAAd,CAAnB,EAAvB,CAAd;;KAEID,eAAeC,UAAUE,KAAV,EAAnB;;KAEIrG,SAASsM,aAAe/L,OAAf,EAAwB2F,YAAxB,EAAsCC,SAAtC,EAAiDrF,KAAjD,EAAwDmD,OAAxD,CAAb;;KAEIjE,WAAWqD,SAAX,IAAwBvC,UAAUuC,SAAtC,EAAiD;SACzCvC,KAAP;;;+BAGwBA,KAAzB,EAAgCmD,OAAhC;;QAEOnD,KAAP;;;;;;;;;;;;;;;;;;;;ACtBc,SAASyL,MAAT,CAAgBnM,GAAhB,EAAqB;;KAE/BA,OAAO,IAAP,IAAe,CAAC9B,EAAE0C,QAAF,CAAWZ,GAAX,CAApB,EAAqC;KACjCyF,MAAM,EAAV;MACK,IAAI2G,CAAT,IAAcpM,GAAd,EAAmB;YACRyF,GAAV,EAAe2G,CAAf,EAAkBpM,IAAIoM,CAAJ,CAAlB;;QAEM3G,GAAP;;;ACTc,SAAS4G,cAAT,CAAwBC,OAAxB,EAAiCC,OAAjC,EAA0C;;KAEpD,CAACrO,EAAE0C,QAAF,CAAW0L,OAAX,CAAD,IAAwB,CAACpO,EAAE0C,QAAF,CAAW2L,OAAX,CAA7B,EAAkD;SAC1CD,WAAWC,OAAlB;;KAEIrO,EAAEoE,OAAF,CAAUgK,OAAV,KAAsB,CAACpO,EAAEoE,OAAF,CAAUiK,OAAV,CAAxB,IAAgDrO,EAAEoE,OAAF,CAAUiK,OAAV,KAAsB,CAACrO,EAAEoE,OAAF,CAAUgK,OAAV,CAA3E,EAAgG;SACxF,KAAP;;;KAGG,QAAOA,OAAP,yCAAOA,OAAP,cAAyBC,OAAzB,yCAAyBA,OAAzB,EAAJ,EAAsC,OAAO,KAAP;;KAElC3C,OAAO1L,EAAE0L,IAAF,CAAO0C,OAAP,CAAX;KACG1C,QAAQ1L,EAAE0L,IAAF,CAAO2C,OAAP,CAAX,EAA4B,OAAO,KAAP;;KAExBrO,EAAEoE,OAAF,CAAUgK,OAAV,CAAJ,EAAwB;MACnBE,YAAYtO,EAAEuO,IAAF,CAAOH,QAAQI,MAAR,CAAeH,OAAf,CAAP,CAAhB;SACOrO,EAAEqE,KAAF,CAAQiK,SAAR,EAAmB,iBAAS;OAC9BG,UAAUzO,EAAEmD,MAAF,CAASiL,OAAT,EAAkB;WAAMM,MAAMlM,KAAZ;IAAlB,CAAd;OACImM,UAAU3O,EAAEmD,MAAF,CAASkL,OAAT,EAAkB;WAAMK,MAAMlM,KAAZ;IAAlB,CAAd;OACIiM,QAAQzL,MAAR,IAAkB2L,QAAQ3L,MAA9B,EAAsC,OAAO,KAAP;UAC/BmL,eAAeM,QAAQ,CAAR,CAAf,EAA2BE,QAAQ,CAAR,CAA3B,CAAP;GAJM,CAAP;EAFD,MAQO;MACFC,UAAU5O,EAAEuO,IAAF,CAAOvO,EAAEsJ,IAAF,CAAO8E,OAAP,EAAgBI,MAAhB,CAAuBxO,EAAEsJ,IAAF,CAAO+E,OAAP,CAAvB,CAAP,CAAd;MACIO,QAAQ5L,MAAR,IAAkB0I,IAAtB,EAA4B,OAAO,KAAP;SACrB1L,EAAEqE,KAAF,CAAQuK,OAAR,EAAiB,eAAO;UACvBT,eAAeC,QAAQrM,GAAR,CAAf,EAA6BsM,QAAQtM,GAAR,CAA7B,CAAP;GADM,CAAP;;;;ACrBa,SAAS8M,aAAT,CAAuBC,KAAvB,EAAuC;mCAAN5M,IAAM;MAAA;;;;KAE/C6M,aAAalM,UAAU,QAAQiM,KAAlB,CAAnB;KACMzE,SAASjC,UAAU,IAAV,EAAgB2G,UAAhB,EAA4B,EAAE3M,OAAO,KAAT,EAA5B,CAAf;KACIV,eAAJ;;;KAGI1B,EAAEC,UAAF,CAAaoK,MAAb,CAAJ,EAA0B;;WAEhBA,OAAO5H,KAAP,CAAa,IAAb,EAAmBP,IAAnB,CAAT;;;KAGElC,EAAEC,UAAF,CAAa,KAAK2N,OAAlB,CAAH,EAA+B;;OAEzBA,OAAL,CAAanL,KAAb,CAAmB,IAAnB,EAAyByI,SAAzB;;;QAGMxJ,MAAP;;;ACnBc,SAASsN,eAAT,CAAyB/M,OAAzB,EAAkC6M,KAAlC,EAAkD;mCAAN5M,IAAM;MAAA;;;QACzD2M,cAActK,IAAd,uBAAmBtC,OAAnB,EAA4B6M,KAA5B,SAAsC5M,IAAtC,EAAP;;;ACHc,SAAS+M,YAAT,CAAsBtJ,OAAtB,EAA+B2D,IAA/B,EAAqC;;;KAC/C,CAAC3D,OAAL,EAAc;;;;GAEZrE,IAAF,CAAOgI,IAAP,EAAa,eAAO;MACb4F,SAASvJ,QAAQ5D,GAAR,CAAf;MACImN,WAAWnK,SAAf,EAA0B;SACpBhD,GAAL,IAAYmN,MAAZ;;EAHF;;;ACAc,SAASC,cAAT,CAAwBpN,GAAxB,EAAyD;gFAAJ,EAAI;KAA1BqN,QAA0B,QAA1BA,QAA0B;KAAhBzJ,OAAgB,QAAhBA,OAAgB;;KAEpE,CAAC3F,EAAEuC,QAAF,CAAWR,GAAX,CAAJ,EAAqB;;;;KAEjBsN,OAAOjH,UAAU,IAAV,EAAgBrG,GAAhB,EAAqB,EAAEG,MAAM,CAAE,IAAF,CAAR,EAArB,CAAX;KACIoN,WAAWlH,UAAU,IAAV,EAAgBrG,MAAM,SAAtB,EAAiC,EAAEG,MAAM,CAAE,IAAF,CAAR,EAAjC,CAAf;;KAEIkN,YAAYpP,EAAEuC,QAAF,CAAW8M,IAAX,CAAhB,EAAkC;aACtBrP,EAAEa,MAAF,CAAS,EAAT,EAAayO,QAAb,EAAuB,EAAExM,MAAMuM,IAAR,EAAvB,CAAX;SACOD,QAAP;;WAESpP,EAAEa,MAAF,CAAS,EAAT,EAAa8E,OAAb,EAAsB2J,QAAtB,CAAV;;KAEI7O,OAAO4O,IAAP,CAAJ,EAAkB;SACVA,IAAP;EADD,MAEO,IAAI1O,YAAY0O,IAAZ,CAAJ,EAAuB;SACtB,IAAIA,IAAJ,CAAS1J,OAAT,CAAP;;;;ACdK,IAAM4J,aAAa,EAAnB;;AAEP,SAASC,OAAT,CAAiB1P,GAAjB,EAAqB;KACjB2J,aAAa3J,GAAb,CAAH,EAAqB;SACb,EAAP;EADD,MAEO,IAAGE,EAAEuC,QAAF,CAAWzC,GAAX,CAAH,EAAmB;SAClBkI,UAAUuH,UAAV,EAAsBzP,GAAtB,KAA8B,EAArC;EADM,MAEA,IAAGE,EAAE0C,QAAF,CAAW5C,GAAX,CAAH,EAAmB;SAClBA,GAAP;;;;AAIF,AAAO,SAAS2H,KAAT,CAAa3H,GAAb,EAAkBgJ,IAAlB,EAAwBnD,OAAxB,EAAgC;KAClC8J,QAAQD,QAAQ1P,GAAR,CAAZ;QACOkK,QAAQyF,KAAR,EAAe3G,IAAf,EAAqBnD,OAArB,CAAP;;;AAGD,AAAO,SAASoD,GAAT,CAAajJ,GAAb,EAAkBgJ,IAAlB,EAAwBnD,OAAxB,EAAgC;KAClC8J,QAAQD,QAAQ1P,GAAR,CAAZ;QACO+I,QAAQ4G,KAAR,EAAe3G,IAAf,EAAqBnD,OAArB,CAAP;;;AAGD,YAAe;WAAA;SAAA;IAAA,eAGVuB,IAHU,EAGJL,IAHI,EAGC;MACX7G,EAAEuC,QAAF,CAAW2E,IAAX,CAAH,EAAoB;aACTqI,UAAV,EAAsBrI,IAAtB,EAA4BL,IAA5B;GADD,MAEO,IAAI7G,EAAE0C,QAAF,CAAWwE,IAAX,CAAJ,EAAqB;KACzBrG,MAAF,CAAS0O,UAAT,EAAqBrI,IAArB;;;CAPH;;AC3Be,SAASwI,QAAT,CAAkBC,KAAlB,EAAyBC,IAAzB,EAAwC;KAATC,IAAS,uEAAF,CAAE;;KAClDF,SAAS,IAAb,EAAmB;;;KACf,CAAC3P,EAAE4E,QAAF,CAAWgL,IAAX,CAAD,IAAqB5P,EAAE4E,QAAF,CAAWiL,IAAX,CAAzB,EAA2C;QACpC,IAAIzD,KAAJ,CAAU,mDAAV,CAAN;;KAEG,CAACpM,EAAEoE,OAAF,CAAUuL,KAAV,CAAD,IAAqB3P,EAAE0C,QAAF,CAAWiN,KAAX,CAAzB,EAA4C;UACnC3P,EAAE8P,OAAF,CAAUH,KAAV,CAAR;;KAEG3M,SAAS4M,OAAOC,IAApB;KACGF,MAAM3M,MAAN,GAAeA,MAAlB,EAA0B;WAAW2M,MAAM3M,MAAf;;KACxB+M,QAAQ,EAAZ;MACK,IAAI9I,IAAI4I,IAAb,EAAmB5I,IAAIjE,MAAvB,EAA+BiE,GAA/B,EAAoC;QAC7B7F,IAAN,CAAWuO,MAAM1I,CAAN,CAAX;;QAEM8I,KAAP;;;ACZc,SAASC,WAAT,CAAqBC,GAArB,EAA0BC,GAA1B,EAA8B;KACxC,CAAClQ,EAAE0C,QAAF,CAAWuN,GAAX,CAAD,IAAoB,CAACjQ,EAAE0C,QAAF,CAAWwN,GAAX,CAAzB,EAA0C;SAClCA,GAAP;;KAEGC,UAAUC,cAAKH,GAAL,CAAd;KACII,UAAUD,cAAKF,GAAL,CAAd;GACE5O,IAAF,CAAO+O,OAAP,EAAgB,UAAC7N,KAAD,EAAQT,GAAR,EAAgB;UACvBA,GAAR,IAAeS,KAAf;EADD;QAGO8N,OAAOH,OAAP,CAAP;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}