{"version":3,"file":"index.js","sources":["is-known-ctor/ctors.js","is-known-ctor/index.js","better-result/index.js","camel-case/index.js","take-first/index.js","compare-ab/get-model.js","compare-ab/get-view.js","compare-ab/index.js","comparator/index.js","convert-string/to-number.js","to-bool/options.js","to-bool/index.js","convert-string/converters.js","convert-string/index.js","flat/index.js","is-empty-value/index.js","get-by-path/get-property.js","get-by-path/get-by-path-array.js","get-by-path/index.js","get-option/index.js","flags/helpers.js","flags/get.js","flags/has.js","mix/options.js","mix/create-mixin-from-object.js","mix/normalize-arguments.js","mix/with.js","mix/index.js","params-to-object/simple.js","set-by-path/set-property.js","set-by-path/set-by-path-array.js","set-by-path/normalize-options.js","set-by-path/trigger-model-change-events.js","set-by-path/ensure-arguments.js","set-by-path/index.js","params-to-object/complex.js","params-to-object/index.js","unflat/index.js","compare-objects/index.js","trigger-method/index.js","merge-options/index.js","build-by-key/get-by-key.js","build-by-key/index.js","build-view-by-key/index.js","enums/index.js","skip-take/index.js","render-in-node/index.js","clone/index.js","merge-objects/index.js"],"sourcesContent":["import _ from 'underscore';\r\nimport { Model, Collection, BackboneView, Router, MnObject, Region, BaseClass } from 'bbmn-core';\r\nimport Mn from 'backbone.marionette';\r\n\r\nconst ctors = _.reduce([\r\n\tModel, Collection, BackboneView, Router, MnObject, Region, BaseClass\r\n], (ctors, ctor) => {\r\n\t/* istanbul ignore next */\r\n\tif(_.isFunction(ctor)){\r\n\t\tctors.push(ctor);\r\n\t}\r\n\treturn ctors;\r\n}, []);\r\n\r\n\r\nlet tryGetFromMn = ['Application', 'AppRouter'];\r\n\r\n_.each(tryGetFromMn, ClassName => {\r\n\t_.isFunction(Mn[ClassName]) && ctors.push(Mn[ClassName]);\r\n});\r\n\r\n\r\nexport default ctors;\r\n","import _ from 'underscore';\r\nimport knownCtors from './ctors.js';\r\n\r\nfunction isKnownCtor(arg) {\r\n\tif(!_.isFunction(arg)) {\r\n\t\treturn false;\r\n\t}\r\n\treturn _(knownCtors).some((ctor) => arg === ctor || arg.prototype instanceof ctor);\r\n}\r\n\r\nexport default isKnownCtor;\r\n","import _ from 'underscore';\r\nimport isKnownCtor from '../is-known-ctor/index.js';\r\n\r\nexport default function betterResult(obj = {}, key, opts = {})\r\n{\r\n\tlet { context, args, checkAlso, force } = opts;\r\n\tlet defaultValue = opts.default;\r\n\r\n\tif (!_.isString(key) || key === '') { return; }\r\n\t\r\n\tlet value = obj[key];\r\n\r\n\tif (value != null && (!_.isFunction(value) || isKnownCtor(value))) {\r\n\t\treturn value;\r\n\t}\r\n\t\r\n\tif (force !== false && _.isFunction(value)) {\r\n\t\tvalue = value.apply(context || obj, args);\r\n\t}\r\n\r\n\t//let result = force !== false && _.isFunction(value) ? value.apply(context || obj, args) : value;\r\n\r\n\tif (value == null && _.isObject(checkAlso)) {\r\n\t\tlet alsoOptions = _.omit(opts, 'checkAlso');\r\n\t\tvalue = betterResult(checkAlso, key, alsoOptions);\r\n\t}\r\n\r\n\tif (value == null && defaultValue != null ) {\r\n\t\tvalue = defaultValue;\r\n\t}\r\n\r\n\treturn value;\r\n}\r\n","import _ from 'underscore';\r\n// camelCase('asd:qwe:zxc') -> asdQweZxc\r\n// camelCase('asd:qwe:zxc', true) -> AsdQweZxc\r\nexport default function camelCase(...args) {\r\n\t\r\n\tlet text;\r\n\tlet first;\r\n\r\n\tif (!args.length) return;\r\n\telse if (args.length == 1) {\r\n\t\ttext = args[0];\r\n\t} else {\r\n\t\tif(_.isBoolean(args[args.length - 1])){\r\n\t\t\tfirst = args.pop();\r\n\t\t}\r\n\t\ttext = _.filter(args, chunk => chunk != null).join(':');\r\n\t}\r\n\r\n\tif (!text) return text;\r\n\r\n\tif (!_.isString(text)) return text.toString();\r\n\ttext = text.replace(/:{2,}/gmi,':');\r\n\tvar splitter = first === true ? /(^|:)(\\w)/gi : /(:)(\\w)/gi;\r\n\ttext = text.replace(splitter, (match, prefix, text) => text.toUpperCase());\r\n\tif(!first)\r\n\t\ttext = text.replace(/(^)(\\w)/gi, (match, prefix, text) => text.toLowerCase());\r\n\treturn text;\r\n\r\n}\r\n","import _ from 'underscore';\r\nexport default function takeFirst(key, ...args) {\r\n\tif(!_.isString(key) || key === '') return;\r\n\tlet value;\r\n\t_.some(args, arg => {\r\n\t\tif (!_.isObject(arg)) { return false; }\r\n\r\n\t\tif (key in arg) {\r\n\t\t\tvalue = arg[key];\r\n\t\t\treturn true;\r\n\t\t}\r\n\t});\r\n\treturn value;\r\n}\r\n","import { isModel, isView } from 'bbmn-core';\r\n\r\nexport default function getModel(arg){\r\n\r\n\tif (isModel(arg)) { return arg; }\r\n\t\r\n\tif (isView(arg)) { return arg.model; }\r\n\r\n}\r\n","import { isView }  from 'bbmn-core';\r\nexport default function getModel(arg){\r\n\treturn isView(arg) && arg;\r\n}\r\n","import _ from 'underscore';\r\nimport getModel from './get-model.js';\r\nimport getView from './get-view.js';\r\nexport default function compareAB(a, b, func){\r\n\tif(_.isArray(func)) {\r\n\r\n\t\tlet result = 0;\r\n\r\n\t\t_(func).every((f) => {\r\n\t\t\tresult = compareAB(a,b,f);\r\n\t\t\treturn result === 0;\r\n\t\t});\r\n\t\t\r\n\t\treturn result;\r\n\t} else {\r\n\t\tif (_.isFunction(func)) {\r\n\t\t\ta = func.call(a, getModel(a), getView(a));\r\n\t\t\tb = func.call(b, getModel(b), getView(b));\r\n\t\t}\r\n\r\n\t\tif (a < b) return -1;\r\n\t\tif (a > b) return 1;\r\n\t\treturn 0;\r\n\r\n\t}\r\n}\r\n","import _ from 'underscore';\r\nimport compareAB from '../compare-ab/index.js';\r\nexport default function comparator(...args){\r\n\tvar result = 0;\r\n\r\n\t//for simple case (arg1, arg2, compare)\r\n\tif (args.length <= 3 && !_.isArray(args[0])){\r\n\r\n\t\treturn compareAB.apply(null, args);\r\n\r\n\t} \r\n\t//for complex cases ([arg1, arg2, compare], [], .... [])\r\n\t//each arguments should be an array\r\n\telse {\r\n\r\n\t\t_(args).every((single) => {\r\n\r\n\t\t\tif (!_.isArray(single)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tresult = compareAB(...single);\r\n\t\t\treturn result === 0;\r\n\t\t});\r\n\r\n\t}\r\n\r\n\treturn result;\r\n}\r\n","import _ from 'underscore';\r\nexport default function toNumber(text){\r\n\r\n\tif(_.isNumber(text) && !_.isNaN(text)) {\r\n\t\treturn text;\r\n\t} else if (text == null || !_.isString(text)) { \r\n\t\treturn; \r\n\t}\r\n\t\r\n\tlet value = parseFloat(text, 10);\r\n\r\n\tif(isNaN(value)) { return; }\r\n\t\t\r\n\treturn value;\r\n}\r\n","export default {\r\n\tnullable: true, \r\n\tstrict: false,\r\n\treturnNullAs: undefined, \r\n\treturnEmptyAs: undefined, \r\n\treturnNullAndEmptyAs: undefined,\r\n\treturnAnyAs: undefined, \r\n\treturnOtherAs: undefined\r\n};\r\n","import _ from 'underscore';\r\nimport defaultOptions from './options.js';\r\n\r\nconst trueValues = ['true','1','-1','yes'];\r\nconst falseValues = ['false','0','no'];\r\n\r\nconst alternative = function(...args) {\r\n\tlet returnValue;\r\n\t_(args).some(arg => {\r\n\t\tif(_.isBoolean(arg)) {\r\n\t\t\treturnValue = arg;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t});\r\n\treturn returnValue;\r\n};\r\n\r\nconst valueOrAlternative = function(nullable, nullValue, value, ...alts){\r\n\tlet alt = alternative(...alts);\r\n\tif (alt != null)\r\n\t\treturn alt;\r\n\telse if (nullable)\r\n\t\treturn nullValue;\r\n\telse\r\n\t\treturn value;\r\n};\r\n\r\nconst convertToBoolean = function (arg, opts = {})\r\n{\r\n\r\n\tlet other;\r\n\tlet options = _.extend({}, defaultOptions, opts);\r\n\tlet { \r\n\t\tnullable, strict,\r\n\t\treturnNullAs, returnEmptyAs, returnNullAndEmptyAs,\r\n\t\treturnAnyAs, returnOtherAs\r\n\t} = options;\r\n\r\n\r\n\r\n\tif (arg == null) {\r\n\t\treturn valueOrAlternative(nullable, undefined, false, returnNullAs, returnNullAndEmptyAs);\r\n\t}\r\n\telse if (arg === '') {\r\n\t\treturn valueOrAlternative(nullable, undefined, false, returnEmptyAs, returnNullAndEmptyAs);\r\n\t} else if (_.isBoolean(arg)) {\r\n\t\treturn arg;\r\n\t}\r\n\t//  else if (_.isObject(arg)) {\r\n\t// }\r\n\t\r\n\tother = strict \r\n\t\t? (nullable ? undefined : false) \r\n\t\t: true;\r\n\t\t\r\n\r\n\tlet text = arg.toString().toLowerCase();\r\n\tlet isTrue = convertToBoolean.trueValues.indexOf(text) > -1;\r\n\tlet isFalse = convertToBoolean.falseValues.indexOf(text) > -1;\r\n\r\n\r\n\tif (_.isBoolean(returnAnyAs)) {\r\n\t\treturn returnAnyAs;\r\n\t} else if (_.isBoolean(returnOtherAs)) {\r\n\t\tother = returnOtherAs;\r\n\t}\r\n\t\r\n\treturn isTrue \r\n\t\t? true \r\n\t\t: isFalse \r\n\t\t\t? false \r\n\t\t\t: other;\r\n};\r\n\r\nconvertToBoolean.trueValues = trueValues;\r\nconvertToBoolean.falseValues = falseValues;\r\nexport default convertToBoolean;\r\n","import toNumber from './to-number.js';\r\nimport toBool from '../to-bool/index.js';\r\n\r\nexport default {\r\n\tnumber: toNumber,\r\n\tboolean: toBool,\r\n\tbool: toBool,\r\n};\r\n","import _ from 'underscore';\r\nimport converters from './converters.js';\r\n\r\n//this is under development yet and can be change in any time\r\nexport default function convertString(text, type, options) {\r\n\t\r\n\tif (!_.isString(type)) { \r\n\t\treturn text;\r\n\t}\r\n\r\n\tconst converter = converters[type];\r\n\r\n\tif (!_.isFunction(converter)) {\r\n\t\treturn text;\r\n\t}\r\n\r\n\treturn converter(text, options);\r\n\t\r\n}\r\n","import _ from 'underscore';\r\nimport { isModel } from 'bbmn-core';\r\n\r\nfunction isBadSource(src, flatted) {\r\n\tif (typeof global !== 'undefined' && src === global) {\r\n\t\treturn true;\r\n\t} else if (typeof window !== 'undefined' && src === window) {\r\n\t\treturn true;\r\n\t} else if(flatted.indexOf(src) > -1) {\r\n\t\treturn true;\r\n\t}\r\n}\r\n\r\nexport const privateApi = { \r\n\ttraverse(source, destination = {}, root = '', sources = []) {\r\n\t\tif(_.isFunction(source) || _.isArray(source)){\r\n\t\t\treturn source;\r\n\t\t}\r\n\t\tif(isBadSource(source, sources)) { return; }\r\n\t\tsources.push(source);\r\n\t\tvar hash = isModel(source) ? source.attributes : source;\r\n\r\n\t\tvar props = Object.getOwnPropertyNames(hash);\r\n\r\n\t\tfor (var x = 0; x < props.length; x++) {\r\n\t\t\tvar name = props[x];\r\n\t\t\tvar prop = hash[name];\r\n\t\t\tif (prop === undefined) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\telse if (_.isArray(prop)) {\r\n\t\t\t\tdestination[root + name] = prop.slice(0);\r\n\t\t\t}\r\n\t\t\telse if (_.isDate(prop)) {\r\n\t\t\t\tdestination[root + name] = new Date(prop.valueOf());\r\n\t\t\t}\r\n\t\t\telse if (!_.isObject(prop) || _.isFunction(prop)) {\r\n\t\t\t\tdestination[root + name] = prop;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tprivateApi.traverse(prop, destination, root + name + '.', _.clone(sources));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn destination;\r\n\t}\r\n};\r\n\r\nexport default function flattenObject(obj) {\r\n\tif (_.isObject(obj)) { \r\n\t\treturn privateApi.traverse(obj);\r\n\t} \r\n}\r\n","import _ from 'underscore';\r\nexport default function isEmptyValue(arg, { allowWhiteSpace = false } = {}) {\r\n\r\n\tif (arg == null || _.isNaN(arg)) return true;\r\n\r\n\tif (!_.isString(arg)) return false;\r\n\t\r\n\tif (arg === '') return true;\r\n\t\r\n\treturn !allowWhiteSpace && arg.trim() === '';\r\n\t\r\n}\r\n","import _ from 'underscore';\r\nimport { isModel } from 'bbmn-core';\r\nimport isEmptyValue from '../is-empty-value';\r\nfunction getProperty(context, name, options = {})\r\n{\r\n\tif (!_.isObject(context) || isEmptyValue(name)) { return; }\r\n\r\n\t\r\n\tif (isModel(context)) {\r\n\t\tlet { noModelAttributes, includeModelProperty, modelPropertyFirst } = options;\r\n\r\n\t\tlet attrValue = context.get(name, { gettingByPath: true  });\r\n\t\tlet propValue = context[name];\r\n\t\tlet value;\r\n\r\n\t\tif (noModelAttributes === true) {\r\n\t\t\tvalue = propValue;\r\n\t\t} else if (modelPropertyFirst) {\r\n\t\t\tvalue = propValue != null ? propValue : attrValue;\r\n\t\t} else if (includeModelProperty) {\r\n\t\t\tvalue = attrValue != null ? attrValue : propValue;\r\n\t\t} else {\r\n\t\t\tvalue = attrValue;\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t}\r\n\telse {\r\n\t\treturn context[name];\r\n\t}\r\n}\r\nexport default getProperty;\t\r\n","import _ from 'underscore';\r\nimport getProperty from './get-property.js';\r\nimport isEmptyValue from '../is-empty-value';\r\n\r\nfunction getByPathArray(context, propertyName, pathArray, options) {\r\n\t\r\n\tif (!_.isObject(context) || isEmptyValue(propertyName))\r\n\t\treturn;\r\n\r\n\tvar prop = getProperty(context, propertyName, options);\r\n\r\n\tif (!pathArray.length || prop == null)\r\n\t\treturn prop;\r\n\r\n\tvar nextName = pathArray.shift();\r\n\r\n\treturn getByPathArray(prop, nextName, pathArray, options);\r\n\r\n}\r\n\r\nexport default getByPathArray;\r\n","import _ from 'underscore';\r\nimport getByPathArray from './get-by-path-array.js';\r\nimport isEmptyValue from '../is-empty-value';\r\n\r\nexport default function getByPath(obj, path, options) {\r\n\r\n\tif (!_.isObject(obj) || isEmptyValue(path)) return;\r\n\r\n\tvar pathArray = _.isString(path) ? path.split('.')\r\n\t\t: _.isArray(path) ? [].slice.call(path)\r\n\t\t\t: [path];\r\n\r\n\tvar prop = pathArray.shift();\r\n\r\n\treturn getByPathArray(obj, prop, pathArray, options);\r\n\r\n}\r\n","import _ from 'underscore';\r\nimport result from '../better-result/index.js';\r\n\r\nexport default function getOption(context = {}, key, opts, also) {\r\n\r\n\tif(_.isObject(key) && _.isString(opts)){\r\n\t\tlet _opts = also;\r\n\t\talso = key;\r\n\t\tkey = opts;\r\n\t\topts = _opts;\r\n\t}\r\n\r\n\tlet options = _.extend({ args:[context], context }, opts, { default: null });\r\n\tlet { deep } = options;\r\n\tlet defaultValue = opts && opts.default;\r\n\r\n\tlet value = result(context.options || also, key, options);\r\n\tif (value == null && deep !== false) {\r\n\t\tvalue = result(context, key, options);\r\n\t}\r\n\t\r\n\treturn value != null ? value : defaultValue;\r\n\r\n}\r\n\r\nexport function instanceGetOption(...args){\r\n\treturn getOption(this, ...args);\r\n}\r\n","import _ from 'underscore';\r\nimport isEmptyValue from '../is-empty-value/index.js';\r\n\r\n\r\nexport function normalizeStringArray(arr, { caseSensitive } = {}){\r\n\tconst check = {};\r\n\treturn _.reduce(arr, (result, item) => {\r\n\t\t\r\n\t\tif (isEmptyValue(item)) { return result; }\r\n\t\titem = item.toString();\r\n\t\tlet checkKey = caseSensitive ? item : item.toLowerCase();\r\n\t\tif (checkKey in check) { return result; }\r\n\t\tcheck[checkKey] = 1;\r\n\t\tresult.push(item.toString());\r\n\t\treturn result;\r\n\r\n\t}, []);\r\n}\r\n\r\n\r\nexport function normalizeArgument(value, options, returnObject) {\r\n\r\n\tif(_.isString(value)) {\r\n\t\tvalue = value.split(/\\s*,\\s*/gmi);\r\n\t}\r\n\r\n\tif (_.isArray(value)) {\r\n\t\treturn normalizeStringArray(value, options);\r\n\t} else if (_.isObject(value) && returnObject) {\r\n\t\treturn value;\r\n\t}\r\n\r\n}\r\n\r\n\r\nexport function normalizeValueAndFlag(value, flag, options) {\r\n\treturn {\r\n\t\tvalues: normalizeArgument(value, options, true),\r\n\t\tflags: normalizeArgument(flag, options)\r\n\t};\r\n}\r\n\r\nfunction compare(a, b, { caseSensitive }){\r\n\t\r\n\tif(!caseSensitive) {\r\n\t\ta = a.toLowerCase();\r\n\t\tb = b.toLowerCase();\r\n\t}\r\n\t\r\n\treturn a === b;\r\n}\r\n\r\nexport function searchFlags(values, flags,  options)\r\n{\r\n\tlet isArray = _.isArray(values);\r\n\tlet { useObjectValues } = options;\r\n\r\n\tlet result =_.reduce(values, (filtered, item, key) => {\r\n\t\tlet check = item;\r\n\t\tif(!isArray && !useObjectValues){\r\n\t\t\tcheck = key;\r\n\t\t}\r\n\t\t\r\n\t\tlet good = _.some(flags, flag => compare(check, flag, options));\r\n\t\r\n\t\tif (!good) { return filtered; }\r\n\t\r\n\t\tif (isArray) {\r\n\t\t\tfiltered.push(check);\r\n\t\t} else {\r\n\t\t\tfiltered.push({value: item, key });\r\n\t\t}\r\n\r\n\t\treturn filtered;\r\n\t}, []);\r\n\r\n\r\n\tlet all = options.all;\r\n\tif (\r\n\t\t!result.length \r\n\t\t|| (all && result.length != flags.length)\r\n\t) { \r\n\t\treturn; \r\n\t}\r\n\r\n\treturn result;\r\n}\r\n","import _ from 'underscore';\r\nimport { searchFlags, normalizeValueAndFlag } from './helpers';\r\n\r\n\r\nconst processReturns = {\r\n\tstring: ({ isArray, founded, delimeter, takeObjectKeys }) => {\t\t\r\n\t\tif (isArray) {\r\n\t\t\treturn founded.join(delimeter);\r\n\t\t} else {\r\n\t\t\tlet key = takeObjectKeys ? 'key' : 'value';\r\n\t\t\treturn _.pluck(founded, key).join(delimeter);\r\n\t\t}\t\t\r\n\t},\r\n\tarray: ({ isArray, doNotPluck, founded, takeObjectKeys }) => {\r\n\t\tif (isArray || doNotPluck) {\r\n\t\t\treturn founded;\r\n\t\t} else {\r\n\t\t\tlet key = takeObjectKeys ? 'key' : 'value';\r\n\t\t\treturn _.pluck(founded, key);\r\n\t\t}\t\t\r\n\t},\r\n\tobject: ({ isArray, takeObjectKeys, founded }) => {\r\n\t\treturn _.reduce(founded, (result, item, index) => {\r\n\t\t\tlet value = isArray \r\n\t\t\t\t? item \r\n\t\t\t\t: takeObjectKeys ? item.key : item.value;\r\n\t\t\tlet key = isArray \r\n\t\t\t\t? index \r\n\t\t\t\t: takeObjectKeys ? item.value : item.key;\r\n\t\t\tresult[key] = value;\r\n\t\t\treturn result;\r\n\t\t}, {});\r\n\t},\r\n};\r\n\r\nfunction normalizedReturn({ returnAs, flag, isArray, founded, delimeter, takeObjectKeys, doNotPluck }){\t\r\n\tif (returnAs == null) {\r\n\t\treturnAs = _.isArray(flag) ? 'array' : 'string';\r\n\t}\t\r\n\tlet processor = processReturns[returnAs];\t\r\n\tif(!_.isFunction(processor)) { return; }\r\n\r\n\tlet processorOptions = {\r\n\t\tisArray, founded, delimeter, takeObjectKeys, doNotPluck\r\n\t};\r\n\r\n\treturn processor(processorOptions);\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default function getFlag(value, flag, options = {}) {\r\n\r\n\tlet { flags, values } = normalizeValueAndFlag(value, flag, options);\r\n\tif (!flags || !values) {\r\n\t\treturn;\r\n\t}\r\n\r\n\r\n\tlet founded = searchFlags(values, flags, options);\r\n\tif(!founded) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tlet returnOptions = _.extend({ \r\n\t\tdelimeter: ', ', \r\n\t\tisArray: _.isArray(values),\r\n\t\tflag,\r\n\t\tfounded\r\n\t}, _.pick(options, 'returnAs', 'takeObjectKeys', 'doNotPluck' ));\r\n\t\r\n\t\r\n\treturn normalizedReturn(returnOptions);\r\n}\r\n","import _ from 'underscore';\r\nimport { searchFlags, normalizeValueAndFlag } from './helpers';\r\n\r\n\r\nexport default function hasFlag(value, flag, options = {}){\r\n\r\n\tif (value == null || flag == null) return false;\r\n\r\n\tif(_.isNumber(value)) {\r\n\r\n\t\tif (!_.isNumber(flag)) return false;\r\n\r\n\t\tlet has = value & flag;\r\n\t\treturn options.all === true ? has === flag : has > 0;\r\n\r\n\t}\r\n\t\r\n\tlet { flags, values } = normalizeValueAndFlag(value, flag, options);\r\n\tif (!flags || !values) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\r\n\tlet founded = searchFlags(values, flags, options);\r\n\treturn !!founded && !!founded.length;\r\n\r\n}\r\n","export default {\r\n\tmergeObjects: true,\r\n\twrapObjectWithConstructor: true,\r\n};\r\n","import _ from 'underscore';\r\nexport default function createMixinFromObject(arg) {\r\n\r\n\tlet mixedObj = _.clone(arg);\r\n\tlet ctor = mixedObj.hasOwnProperty('constructor') && _.isFunction(mixedObj.constructor) && mixedObj.constructor;\r\n\tlet hasConstructor = _.isFunction(ctor);\r\n\t\t\r\n\treturn Base => { \r\n\t\tif (hasConstructor) {\r\n\t\t\tmixedObj.constructor = function mx(){\r\n\t\t\t\tBase.apply(this, arguments);\r\n\t\t\t\tctor.apply(this, arguments);\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn Base.extend(mixedObj);\r\n\t};\r\n}\r\n","import _ from 'underscore';\r\nimport createMixinFromObject from './create-mixin-from-object.js';\r\n\r\nexport default function normalizeArguments(args, opts) {\r\n\tlet raw = {};\r\n\tlet wrap = opts.wrapObjectWithConstructor == true;\r\n\tlet merge = opts.mergeObjects == true;\r\n\tlet mixins = [];\r\n\t_(args).each(arg => {\r\n\t\t\r\n\t\t//if argument is function just put it to mixins array\r\n\t\t//and continue;\r\n\t\tif (_.isFunction(arg)) {\r\n\t\t\tmixins.push(arg);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//if argument is not an object just skip it\r\n\t\tif (!_.isObject(arg)) return;\r\n\r\n\t\t//if mergeObjects == false or wrapObjectWithConstructor == true \r\n\t\t//and there is a constructor function\r\n\t\t//converting to a mixin function\r\n\t\t//otherwise extend rawObject\r\n\t\tif (!merge || (wrap && _.isFunction(arg.constructor))) {\r\n\t\t\tmixins.push(createMixinFromObject(arg));\r\n\t\t} \r\n\t\telse {\r\n\t\t\t_.extend(raw, arg);\r\n\t\t}\r\n\t\r\n\t});\r\n\r\n\t//if rawObject is not empty\r\n\t//convert it to a mixin function\r\n\t//and put it to the begin of mixins array\r\n\tif (_.size(raw))\r\n\t\tmixins.unshift(createMixinFromObject(raw));\r\n\r\n\treturn mixins;\r\n}\r\n","import _ from 'underscore';\r\nimport normalizeArguments from './normalize-arguments.js';\r\n\r\nexport default function withMethod(...args) {\r\n\r\n\tlet mixins = normalizeArguments(args, this.options);\r\n\tlet Mixed = this.class;\r\n\tif (!mixins.length) {\r\n\t\treturn Mixed;\r\n\t} else {\r\n\t\treturn _.reduce(mixins, (Memo, Ctor) => { \r\n\t\t\tlet mixed = Ctor(Memo);\r\n\t\t\treturn mixed;\r\n\t\t}, Mixed);\r\n\t}\r\n}\r\n","import _ from 'underscore';\r\n\r\nimport defaultOptions from './options.js';\r\nimport withMethod from './with.js';\r\n\r\nimport extend from '../extend/index.js';\r\n\r\n\r\n\r\nexport default function mix(_ctor, options) {\r\n\r\n\tlet opts = _.extend({}, defaultOptions, options);\r\n\r\n\tlet ctor;\r\n\r\n\tif (_.isFunction(_ctor)) {\r\n\t\tctor = _ctor;\r\n\t}\r\n\telse if (_.isObject(_ctor)) {\r\n\t\tlet b = _.isFunction(_ctor.constructor) && _ctor.constructor;\r\n\t\tctor = function mx() { b.apply(this, arguments); };\r\n\t\t_.extend(ctor.prototype, _.omit(_ctor,'constructor'));\r\n\r\n\t} else {\r\n\t\tthrow new Error('Mix argument should be a class or a plain object');\r\n\t}\r\n\r\n\tif (!_.isFunction(ctor.extend)) {\r\n\t\tctor.extend = extend;\r\n\t}\r\n\r\n\treturn {\r\n\t\toptions: opts,\r\n\t\twith: withMethod,\r\n\t\tclass: ctor,\r\n\t};\r\n}\r\n","import _ from 'underscore';\r\nimport isEmptyValue from '../is-empty-value/index.js';\r\n\r\nfunction pstoSetPair(context, pair, options){\r\n\tif (!_.isString(pair) || pair === '') return;\r\n\r\n\tlet keyvalue = pair.split('=');\r\n\tlet key = keyvalue.shift();\r\n\tlet value = keyvalue.join('=');\r\n\treturn pstoSetKeyValue(context, key, value, options);\r\n}\r\n\r\nfunction pstoSetKeyValue(context, key, value, options){\r\n\t\t\r\n\tif (isEmptyValue(key)) return;\r\n\r\n\tkey = decodeURIComponent(key);\r\n\tvalue = decodeURIComponent(value);\r\n\r\n\tlet transform = options.transform;\r\n\tif(_.isFunction(transform)) {\r\n\t\tvalue = transform(key, value, options);\r\n\t}\r\n\r\n\tif (isEmptyValue(value)) return;\r\n\r\n\tif (key in context) {\r\n\t\tif(!_.isArray(context[key])) {\r\n\t\t\tcontext[key] = [context[key]];\r\n\t\t}\r\n\t\tcontext[key].push(value);\r\n\t} else {\r\n\t\tcontext[key] = value;\r\n\t}\r\n\treturn { key, value };\r\n}\r\n\r\nexport default function paramsToObject(raw, options) {\r\n\tlet emptyObject = options.emptyObject !== false;\r\n\tlet result = {};\r\n\tif(!_.isString(raw)) return emptyObject ? result : undefined;\r\n\r\n\tlet rawpairs = raw.split('&');\r\n\tlet pairs = _(rawpairs).reduce((memo, rawpair) => {\r\n\t\tlet pair = pstoSetPair(result, rawpair, options);\r\n\t\tif (pair != null) {\r\n\t\t\tmemo.push(pair);\r\n\t\t}\r\n\t\treturn memo;\r\n\t}, []);\r\n\t\r\n\tif (!_.size(result) && !emptyObject) {\r\n\t\treturn;\r\n\t}\r\n\r\n\treturn !options.asArray ? result : pairs;\r\n}\r\n","import getProperty from '../get-by-path/get-property.js';\r\nimport { isModel } from 'bbmn-core';\r\n\r\nfunction setProperty(context, name, value) {\r\n\tif (isModel(context)) {\r\n\t\tcontext.set(name, value, { silent: true });\r\n\t}\r\n\telse {\r\n\t\tcontext[name] = value;\r\n\t}\r\n\r\n\treturn getProperty(context, name);\r\n}\r\n\r\nexport default setProperty;\r\n","import _ from 'underscore';\r\nimport getProperty from '../get-by-path/get-property.js';\r\nimport setProperty from './set-property.js';\r\n\r\nimport { isModel } from 'bbmn-core';\r\nexport default function setByPathArr(context, propertyName, pathArray, value, options) {\r\n\r\n\tlet modelContext;\r\n\tif (isModel(context)) {\r\n\t\tmodelContext = {\r\n\t\t\tmodel: context,\r\n\t\t\tproperty: propertyName,\r\n\t\t\tpathChunks: [].slice.call(pathArray)\r\n\t\t};\r\n\t}\r\n\r\n\t//set value if this is a last chunk of path\r\n\tif (!pathArray.length) {\r\n\r\n\t\tmodelContext && options.models.push(modelContext);\r\n\r\n\t\treturn {\t\t\t\r\n\t\t\tvalue: setProperty(context, propertyName, value, options)\r\n\t\t};\r\n\r\n\t} else {\r\n\r\n\t\tvar prop = getProperty(context, propertyName);\r\n\r\n\t\tif (!_.isObject(prop) && !options.force) {\r\n\t\t\treturn;\r\n\t\t} else if (!_.isObject(prop) && options.force) {\r\n\t\t\tprop = setProperty(context, propertyName, {}, options);\r\n\t\t} \r\n\r\n\t\tmodelContext && options.models.push(modelContext);\r\n\r\n\t\tvar nextName = pathArray.shift();\r\n\r\n\t\treturn setByPathArr(prop, nextName, pathArray, value, options);\r\n\r\n\t}\r\n}\r\n","import _ from 'underscore';\r\nexport default function normalizeSetByPathOptions(opts = {}, ext)\r\n{\r\n\tlet { silent, force } = opts;\r\n\tsilent = silent === true;\r\n\tforce = force !== false;\r\n\tlet options = _.extend({}, opts, ext, {\r\n\t\tsilent, force,\r\n\t\tmodels: []\r\n\t});\r\n\r\n\treturn options;\r\n}\r\n","import _ from 'underscore';\r\nexport default function triggerModelEventsOnSetByPath(value, options)\r\n{\r\n\tif (options.silent || !options.models.length) {\r\n\t\treturn;\r\n\t}\r\n\t\r\n\t_(options.models).each(context => {\r\n\t\tlet rest = context.pathChunks.join(':');\r\n\t\tif (rest) {\r\n\t\t\tcontext.model.trigger(`change:${context.property}:${rest}`, context.model, value);\r\n\t\t}\r\n\t\tcontext.model.trigger(`change:${context.property}`, context.model, value);\r\n\t\tcontext.model.trigger('change', context.model);\r\n\t});\r\n\r\n}\r\n","import _ from 'underscore';\r\nexport default function ensureSetByPathArguments(context, path)\r\n{\r\n\tlet errors = [];\r\n\tif (!_.isObject(context)) {\r\n\t\terrors.push(new Error('Context is not an object'));\r\n\t}\r\n\tif (!_.isString(path) || path === '') {\r\n\t\terrors.push(new Error('Path is not a string'));\r\n\t}\r\n\tif (errors.length) {\r\n\t\treturn errors;\r\n\t}\r\n}\r\n","import setByPathArray from './set-by-path-array.js';\r\nimport normalizeOptions from './normalize-options.js';\r\nimport triggerModelChangeEvents from './trigger-model-change-events.js';\r\nimport ensureArguments from './ensure-arguments.js';\r\nexport default function setByPath(context, path, value, opts) {\r\n\r\n\tlet argumentsErrors = ensureArguments(context, path);\r\n\tif (argumentsErrors) {\r\n\t\treturn value;\r\n\t}\r\n\r\n\tlet pathArray = path.split('.');\t\r\n\tlet options = normalizeOptions(opts, { path, pathArray: [].slice.call(pathArray) });\r\n\r\n\tlet propertyName = pathArray.shift();\r\n\r\n\tlet result = setByPathArray(context, propertyName, pathArray, value, options);\r\n\tif (result === undefined) {\r\n\t\treturn value;\r\n\t} else {\r\n\t\ttriggerModelChangeEvents(value, options);\r\n\t\treturn result.value;\r\n\t}\r\n\r\n}\r\n\r\n\r\n","import _ from 'underscore';\r\nimport paramsToObject from './simple';\r\nimport setByPath from '../set-by-path';\r\n\r\n\r\nfunction parseKey(raw){\r\n\tlet chunks = raw.split('.');\r\n\tlet _key = chunks.shift();\r\n\tlet rest = chunks.join('.');\r\n\tchunks = _key.split('[');\r\n\tlet key = chunks.shift();\r\n\tlet index = chunks.length ? parseInt(chunks.shift().replace(/\\D/g,''),10) : false;\r\n\treturn {\r\n\t\traw,\r\n\t\tkey,\r\n\t\trest,\r\n\t\tproperty: rest.split('.').shift() || undefined,\r\n\t\tindex,\r\n\t\tnotIndexed: index === false\r\n\t};\r\n}\r\n\r\nfunction buildKeyPath(k){\r\n\tlet path = [];\r\n\tk.key && (path.push(k.key));\r\n\tpath.push(k.index);\r\n\tk.property && (path.push(k.property));\r\n\tif(path.length != 3) return;\r\n\treturn path.join('.');\r\n}\r\n\r\nexport default function build(text, opts){\r\n\r\n\tvar params = paramsToObject(text, _.extend({}, opts, { asArray: true }));\r\n\r\n\tvar qs = {};\r\n\tlet allmeeted = {};\r\n\r\n\tfunction hasMeet(k){\r\n\t\tlet path = buildKeyPath(k);\r\n\t\treturn path && (allmeeted[path] == true);\r\n\t}\r\n\tfunction markAsMeeted(k){\r\n\t\tlet path = buildKeyPath(k);\r\n\t\tpath && (allmeeted[path] = true);\r\n\t}\r\n\r\n\t_.each(params, ({ value, key }) => {\r\n\r\n\t\tlet okey = parseKey(key);\r\n\r\n\t\tlet stored = qs[okey.key];\r\n\t\t\r\n\r\n\r\n\t\tif (!stored) {\r\n\t\t\tif(!_.isNumber(okey.index)){\r\n\t\t\t\tokey.index = 0;\r\n\t\t\t}\r\n\t\t\tif(okey.property){\r\n\t\t\t\tlet hash = {};\r\n\t\t\t\tsetByPath(hash, okey.rest, value);\r\n\t\t\t\tvalue = hash;\r\n\t\t\t\tmarkAsMeeted(okey);\r\n\t\t\t}\r\n\t\t\tif(okey.index){\r\n\t\t\t\tlet arr = [];\r\n\t\t\t\tarr[okey.index] = value;\r\n\t\t\t\tvalue = arr;\r\n\t\t\t}\r\n\t\t\tqs[okey.key] = value;\r\n\t\t} else {\r\n\t\t\tif (!_.isArray(stored)) {\r\n\t\t\t\tif(!_.isNumber(okey.index)){\r\n\t\t\t\t\tokey.index = 0;\r\n\t\t\t\t}\r\n\t\t\t\tlet meeted = hasMeet(okey);\r\n\t\t\t\tif (okey.property) {\r\n\t\t\t\t\tif (!meeted) {\r\n\t\t\t\t\t\tlet hash = !okey.index && _.isObject(stored) ? stored : {};\r\n\t\t\t\t\t\tsetByPath(hash, okey.rest, value);\r\n\t\t\t\t\t\tmarkAsMeeted(okey);\r\n\t\t\t\t\t\tif(okey.index) {\r\n\t\t\t\t\t\t\tstored = [stored];\r\n\t\t\t\t\t\t\tstored[okey.index] = hash;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tstored = [stored];\r\n\t\t\t\t\t\tokey.index = stored.length;\r\n\t\t\t\t\t\tlet hash = {};\r\n\t\t\t\t\t\tsetByPath(hash, okey.rest, value);\r\n\t\t\t\t\t\tmarkAsMeeted(okey);\r\n\t\t\t\t\t\tstored.push(hash);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tstored = [stored];\r\n\t\t\t\t\tlet index = okey.index || stored.length;\r\n\t\t\t\t\tstored[index] = value;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (okey.property) {\r\n\t\t\t\t\tif(!_.isNumber(okey.index)){\r\n\t\t\t\t\t\tokey.index = stored.length - 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet meeted = hasMeet(okey);\r\n\t\t\t\t\tif (!meeted) {\r\n\t\t\t\t\t\tlet exists = stored[okey.index];\r\n\t\t\t\t\t\tlet hash = exists || {};\r\n\t\t\t\t\t\tsetByPath(hash, okey.rest, value);\r\n\t\t\t\t\t\tif (!exists){\r\n\t\t\t\t\t\t\tstored[okey.index] = hash;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tmarkAsMeeted(okey);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet exists = !okey.notIndexed && stored[okey.index];\r\n\t\t\t\t\t\tlet hash = exists || {};\r\n\t\t\t\t\t\tsetByPath(hash, okey.rest, value);\r\n\t\t\t\t\t\tif(okey.notIndexed)\r\n\t\t\t\t\t\t\tokey.index = stored.length;\r\n\t\t\t\t\t\tmarkAsMeeted(okey);\r\n\t\t\t\t\t\tif(!exists)\r\n\t\t\t\t\t\t\tstored[okey.index] = hash;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tlet index = okey.index || stored.length;\r\n\t\t\t\t\tstored[index] = value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tqs[okey.key] = stored;\r\n\t\t}\r\n\t});\r\n\treturn qs;\r\n}\r\n","import _ from 'underscore';\r\nimport simple from './simple.js';\r\nimport complex from './complex.js';\r\nexport default function paramsToObject(raw, options = {}){\r\n\tif (options.complex) {\r\n\t\treturn complex(raw, _.omit(options, 'complex'));\r\n\t} else {\r\n\t\treturn simple(raw, options);\r\n\t}\r\n}\r\n","import _ from 'underscore';\r\nimport setByPath from '../set-by-path/index.js';\r\n\r\nexport default function unFlat(obj) {\r\n\r\n\tif (obj == null || !_.isObject(obj)) return;\r\n\tvar res = {};\r\n\tfor (var e in obj) {\r\n\t\tsetByPath(res, e, obj[e]);\r\n\t}\r\n\treturn res;\r\n}\r\n\r\n","import _ from 'underscore';\r\nimport flat from '../flat';\r\nimport isEmptyValue from '../is-empty-value';\r\n/*\r\nfunction check(arg, opts) {\r\n\topts.ob += _.isObject(arg) && 1 || 0;\r\n\topts.ar += _.isArray(arg) && 1 || 0;\r\n\topts.fn += _.isFunction(arg) && 1 || 0;\r\n\topts.sum += (opts.ob + opts.ar + opts.fn);\r\n}\r\n\r\nfunction checkArguments(a,b)\r\n{\r\n\tlet chck = { ob:0, ar:0, fn: 0, sum:0  };\r\n\tcheck(a, chck);\r\n\tcheck(b, chck);\r\n\treturn [chck.sum, chck.ob, chck.fn, chck.ar];\r\n}\r\n\r\n*/\r\n\r\n\r\nfunction getType(arg) {\r\n\tif(_.isFunction(arg)){\r\n\t\treturn 8;\r\n\t} else if(_.isArray(arg)) {\r\n\t\treturn 4;\r\n\t} else if(_.isObject(arg)){\r\n\t\treturn 2;\r\n\t} else {\r\n\t\treturn 1;\r\n\t}\r\n}\r\nfunction sameType(a,b){\r\n\tlet at = getType(a);\r\n\tlet bt = getType(b);\r\n\treturn at == bt && at != 8 ? at : false;\r\n}\r\nexport default function compareObjects(objectA, objectB) {\r\n\r\n\tif (objectA == null && objectB == null) {\r\n\t\treturn objectA == objectB;\r\n\t}\r\n\r\n\tif (objectA === '' || objectB === '') {\r\n\t\treturn objectA === objectB;\r\n\t}\r\n\r\n\r\n\tif (objectA == objectB) {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tlet type = sameType(objectA, objectB);\r\n\tif (!type) {\r\n\t\treturn false;\r\n\t}\r\n\telse if (type == 1){\r\n\t\treturn objectA == objectB;\r\n\t}\r\n\r\n\tobjectA = flat(objectA);\r\n\tobjectB = flat(objectB);\r\n\r\n\tlet size = _.size(objectA);\r\n\tif (size != _.size(objectB)) { \r\n\t\treturn false; \r\n\t}\r\n\r\n\tif (_.isArray(objectA)) {\r\n\t\tlet allvalues = _.uniq(objectA.concat(objectB));\r\n\t\treturn _.every(allvalues, value => {\r\n\t\t\tlet valuesA = _.filter(objectA, _v => compareObjects(_v, value));\r\n\t\t\tlet valuesB = _.filter(objectB, _v => compareObjects(_v, value));\r\n\t\t\tif (valuesA.length != valuesB.length) return false;\r\n\t\t\treturn compareObjects(valuesA[0], valuesB[0]);\r\n\t\t});\r\n\t} else {\r\n\t\tlet allkeys = _.uniq(_.keys(objectA).concat(_.keys(objectB)));\r\n\t\tif (allkeys.length != size) return false;\r\n\t\treturn _.every(allkeys, key => {\r\n\t\t\treturn compareObjects(objectA[key], objectB[key]);\r\n\t\t});\r\n\t}\r\n}\r\n","import _ from 'underscore';\r\nimport camelCase from '../camel-case/index.js';\r\nimport getOption from '../get-option/index.js';\r\n\r\nexport function triggerMethodOn(context, ...args) {\r\n\tif(!_.isObject(context)) { return; }\r\n\t\r\n\treturn triggerMethod.call(context, ...args);\r\n}\r\n\r\nexport default function triggerMethod(event, ...args) {\r\n\t// get the method name from the event name\r\n\tconst methodName = camelCase('on:' + event);\r\n\tconst method = getOption(this, methodName, { force: false });\r\n\tlet result;\r\n  \r\n\t// call the onMethodName if it exists\r\n\tif (_.isFunction(method)) {\r\n\t\t// pass all args, except the event name\r\n\t\tresult = method.apply(this, args);\r\n\t}\r\n  \r\n\tif(_.isFunction(this.trigger)) {\r\n\t\t// trigger the event\r\n\t\tthis.trigger.apply(this, arguments);\r\n\t}\r\n  \r\n\treturn result;\r\n}\r\n\r\n\r\n","import _ from 'underscore';\r\n\r\nexport default function mergeOptions(options, ...keys) {\r\n\tif (!_.isObject(options)) { return; }\r\n  \r\n\tkeys = _.flatten(keys);\r\n\r\n\treturn _.reduce(keys, (merged, key) => {\r\n\t\tif(!_.isString(key)) {\r\n\t\t\treturn merged;\r\n\t\t}\r\n\t\tconst option = options[key];\r\n\r\n\t\tif (option !== undefined) {\r\n\t\t\tthis[key] = option;\r\n\t\t\tmerged[key] = option;\r\n\t\t}\r\n\t\t\r\n\t\treturn merged;\r\n\t}, {});\r\n}\r\n","import _ from 'underscore';\r\nimport getOption from '../get-option/index.js';\r\nimport { isClass } from 'bbmn-core';\r\nimport isKnownCtor from '../is-known-ctor/index.js';\r\n\r\nexport function isCtor(instance, ctor, checkCtor){\r\n\treturn (_.isFunction(ctor) && isClass(instance, ctor))\r\n\t|| (_.isFunction(checkCtor) && checkCtor(instance))\r\n\t|| isKnownCtor(instance);\r\n}\r\n\r\nfunction shouldInvoke(instance, ctor, checkCtor) {\r\n\treturn _.isFunction(instance) && !isCtor(instance, ctor, checkCtor);\r\n}\r\n\r\nexport default function getByKey(context, key, { ctor, checkCtor, options, defaultOptions } = {}){\r\n\t\r\n\tif(!_.isString(key)) { return; }\r\n\t\r\n\tlet instance = getOption(context, key, { force: false, args: [ context ] });\r\n\tif (instance == null) {\r\n\t\treturn;\r\n\t}\r\n\tif (shouldInvoke(instance, ctor, checkCtor)) {\r\n\t\tinstance = instance.call(context, context);\r\n\t}\r\n\r\n\tlet contextOptions = getOption(context, key + 'Options', { args: [ context ] });\r\n\tlet compiledOptions = _.extend({}, defaultOptions, contextOptions, options);\r\n\r\n\r\n\tif(_.isFunction(instance)) {\r\n\r\n\t\treturn {\r\n\t\t\tdefinition: instance,\r\n\t\t\toptions: compiledOptions\r\n\t\t};\r\n\t\t\r\n\t}\r\n\t\r\n\treturn { value: instance, options: compiledOptions };\r\n\r\n}\r\n","import _ from 'underscore';\r\nimport getByKey, { isCtor } from './get-by-key.js';\r\n\r\n\r\nexport default function buildByKey(context, key, getOptions = {}){\r\n\tlet buildContext = getByKey(context, key, getOptions);\r\n\r\n\tif (!_.isObject(buildContext)) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tlet { buildText, ctor, checkCtor, knownCtor, toArguments } = getOptions;\r\n\r\n\tlet { value, definition, options } = buildContext;\r\n\r\n\tif(!_.isFunction(toArguments))\r\n\t\ttoArguments = (context, definition, options) => [options];\r\n\r\n\t\r\n\r\n\tlet args = toArguments.call(context, context, definition, options);\r\n\t\r\n\tif (value != null) {\r\n\t\tif (!_.isObject(value)) {\r\n\t\t\tif (_.isFunction(buildText)) {\r\n\t\t\t\treturn buildText(value, ...args);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (isCtor(value.constructor, ctor, checkCtor, knownCtor)) {\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\t\t}\r\n\t} else {\r\n\t\treturn new definition(...args);\r\n\t}\r\n\r\n\r\n}\r\n","import _ from 'underscore';\r\nimport buildByKey from '../build-by-key/index.js';\r\nimport { isViewClass } from 'bbmn-core';\r\n\r\n\r\n\r\nexport default function buildViewByKey(context, key, options = {}) { //{ TextView, defaultOptions, options } = {}){\r\n\t/*\r\n\tlet getOptions = {\r\n\t\tdefaultOptions,\r\n\t\toptions,\r\n\t\tcheckCtor: (ctor) => isViewClass(ctor)\r\n\t};\r\n\r\n\tif (TextView != null && isViewClass(TextView)) {\r\n\t\tgetOptions.buildText = (text, opts) => new TextView(_.extend({}, opts, { text }));\r\n\t}\r\n\t*/\r\n\tlet { TextView } = options;\r\n\r\n\tlet checkCtor = ctor => isViewClass(ctor);\r\n\t\r\n\tlet buildText = TextView != null && isViewClass(TextView)\r\n\t\t? (text, opts) => new TextView(_.extend({}, opts, { text }))\r\n\t\t: undefined;\r\n\r\n\tlet getOptions = _.extend({ checkCtor, buildText  }, options);\r\n\r\n\treturn buildByKey(context, key, getOptions);\r\n}\r\n","import _ from 'underscore';\r\n\r\nimport { getFlag, hasFlag } from '../flags/index.js';\r\n\r\nimport getByPath from '../get-by-path/index.js';\r\nimport setByPath from '../set-by-path/index.js';\r\nimport isEmptyValue from '../is-empty-value/index.js';\r\n\r\nexport const enumsStore = {};\r\n\r\nexport const enumsApi = {\r\n\tgetFlag,\r\n\thasFlag,\r\n\tgetByPath,\r\n\tsetByPath,\r\n\textendStore(hash){\r\n\t\t_.extend(enumsStore, hash);\r\n\t},\r\n\tgetEnum(arg){\r\n\t\tif(_.isObject(arg)) {\r\n\t\t\treturn arg;\r\n\t\t} else if(isEmptyValue(arg) || !_.isString(arg)){\r\n\t\t\treturn;\r\n\t\t} \r\n\t\r\n\t\treturn enumsApi.getByPath(enumsStore, arg);\r\n\t}\r\n};\r\n\r\n\r\nexport function get(arg, flag, options){\r\n\tif(arguments.length === 0) { return enumsStore; }\r\n\r\n\tlet _enum = enumsApi.getEnum(arg);\r\n\tif (arguments.length === 1) {\r\n\t\treturn _enum;\t\t\r\n\t}\r\n\t\r\n\treturn enumsApi.getFlag(_enum, flag, options);\r\n}\r\n\r\nexport function has(arg, flag, options){\r\n\tlet _enum = enumsApi.getEnum(arg);\r\n\treturn enumsApi.hasFlag(_enum, flag, options);\r\n}\r\n\r\nexport default {\r\n\tget,\r\n\thas,\r\n\tset(name, hash){\r\n\t\tif(_.isString(name)){\r\n\t\t\tenumsApi.setByPath(enumsStore, name, hash);\r\n\t\t} else if (_.isObject(name)){\r\n\t\t\tenumsApi.extendStore(name);\r\n\t\t}\r\n\t},\r\n};\r\n","import _ from 'underscore';\r\nexport default function skipTake(array, take, skip = 0){\r\n\t\r\n\tif(!_.isObject(array)) { return; }\t\r\n\r\n\tif (!_.isNumber(take) || !_.isNumber(skip)) {\r\n\t\tthrow new Error('skipTake skip and take arguments must be a numbers');\r\n\t}\r\n\r\n\tif (!_.isArray(array)) {\r\n\t\tarray = _.toArray(array);\r\n\t}\r\n\r\n\tlet length = take + skip;\r\n\tif(array.length < length) { length = array.length; }\r\n\tlet taken = [];\r\n\tfor (let x = skip; x < length; x++) {\r\n\t\ttaken.push(array[x]);\r\n\t}\r\n\treturn taken;\r\n}\r\n","import _ from 'underscore';\r\nimport { Region } from 'bbmn-core';\r\n\r\nexport const config = {\r\n\tdestroySelfOnEmpty: false,\r\n\tdestroyOnEmpty: false,\r\n\treplaceElement: false,\r\n};\r\n\r\nconst BaseNodeRegion = Region.extend({\r\n\tonEmpty() {\r\n\t\tlet destroySelf = this.getOption('destroySelfOnEmpty') || this.getOption('destroyOnEmpty');\r\n\t\tlet destroyNode = this.getOption('destroyOnEmpty');\r\n\t\tif (destroySelf) {\r\n\t\t\tthis.destroy();\r\n\t\t}\r\n\t\tif (destroyNode) {\r\n\t\t\tthis.el.remove();\r\n\t\t}\r\n\t},\r\n});\r\n\r\nconfig.Region = BaseNodeRegion;\r\n\r\nfunction normalizeElement(selector) {\r\n\tlet body = document.querySelector('body');\r\n\tlet el;\r\n\tif (selector == null) {\r\n\t\tel = body;\r\n\t} else if( selector instanceof Element) {\r\n\t\tel = selector;\r\n\t}\r\n\telse if(selector && selector.jquery){\r\n\t\tel = selector.get(0);\r\n\t} else if (_.isString(selector)) {\r\n\t\tel = document.querySelector(selector);\r\n\t}\r\n\tif (el instanceof Element) {\r\n\t\treturn el;\r\n\t} else {\r\n\t\tthrow new Error('el must be in Dom');\t\t\r\n\t}\r\n}\r\n\r\nconst renderInNode  = function (view,  opts) {\r\n\tlet options = _.extend({}, config, opts);\r\n\tlet { el, replaceElement, destroySelfOnEmpty, destroyOnEmpty, defer } = options;\r\n\r\n\tconst NodeRegion = config.Region;\r\n\tel = normalizeElement(el);\r\n\tconst body = document.querySelector('body');\r\n\tif (el === body) {\r\n\t\tel = document.createElement('div');\r\n\t\tbody.appendChild(el);\r\n\t\treplaceElement = true;\r\n\t}\r\n\tconst region = new NodeRegion({ el, replaceElement, destroySelfOnEmpty, destroyOnEmpty });\r\n\tif (defer) {\r\n\t\t_.defer(() => region.show(view));\r\n\t} else {\r\n\t\tregion.show(view);\r\n\t}\r\n\treturn region;\r\n};\r\n\r\nrenderInNode.config = config;\r\n\r\nexport default renderInNode;\r\n","import _ from 'underscore';\r\n\r\nfunction cloneObject(obj, options) {\r\n\tif(!options.refs) {\r\n\t\toptions.refs = [obj];\r\n\t} else {\r\n\t\tif (options.refs.indexOf(obj) > -1) {\r\n\t\t\treturn;\r\n\t\t} else {\r\n\t\t\toptions.refs.push(obj);\r\n\t\t}\r\n\t}\r\n\treturn _.reduce(obj, (memo, value, key) => {\r\n\t\tlet cloned = cloneValue(value, options);\r\n\t\tif (cloned !== undefined || obj[key] === undefined) {\r\n\t\t\tmemo[key] = cloned;\r\n\t\t}\r\n\t\treturn memo;\r\n\t}, {});\r\n}\r\n\r\nexport default function cloneValue(value, options = {}){\r\n\tlet { functions, deep = true } = options;\r\n\tif (!deep) {\r\n\t\treturn _.clone(value);\r\n\t}\r\n\r\n\tif (_.isFunction(value)) {\r\n\t\treturn functions ? value : undefined;\r\n\t} else if (_.isDate(value)) {\r\n\t\treturn new Date(value.valueOf());\r\n\t} else if(_.isArray(value)) {\r\n\t\treturn _.clone(value);\r\n\t}\r\n\telse if(_.isObject(value)) {\r\n\t\treturn cloneObject(value, options);\r\n\t} else {\r\n\t\treturn _.clone(value);\r\n\t}\r\n}\r\n","import _ from 'underscore';\r\nimport { flat, unflat } from '../index.js';\r\n\r\nfunction norm(arg) {\r\n\treturn _.isObject(arg) ? arg : {};\r\n}\r\n\r\nexport default function mergeObjects(...objects) {\r\n\t\r\n\tlet flatted = _.reduce(objects, (dest, item) => {\r\n\t\t_.extend(dest, flat(norm(item)));\r\n\t\treturn dest;\r\n\t}, {});\r\n\r\n\treturn unflat(flatted);\r\n\r\n}\r\n"],"names":["ctors","_","reduce","Model","Collection","BackboneView","Router","MnObject","Region","BaseClass","ctor","isFunction","push","tryGetFromMn","each","Mn","ClassName","isKnownCtor","arg","knownCtors","some","prototype","betterResult","obj","key","opts","context","args","checkAlso","force","defaultValue","default","isString","value","apply","isObject","alsoOptions","omit","camelCase","text","first","length","isBoolean","pop","filter","chunk","join","toString","replace","splitter","match","prefix","toUpperCase","toLowerCase","takeFirst","getModel","isModel","isView","model","compareAB","a","b","func","isArray","result","every","f","call","getView","comparator","single","toNumber","isNumber","isNaN","parseFloat","undefined","trueValues","falseValues","alternative","returnValue","valueOrAlternative","nullable","nullValue","alts","alt","convertToBoolean","other","options","extend","defaultOptions","strict","returnNullAs","returnEmptyAs","returnNullAndEmptyAs","returnAnyAs","returnOtherAs","isTrue","indexOf","isFalse","toBool","convertString","type","converter","converters","isBadSource","src","flatted","global","window","privateApi","source","destination","root","sources","hash","attributes","props","Object","getOwnPropertyNames","x","name","prop","slice","isDate","Date","valueOf","traverse","clone","flattenObject","isEmptyValue","allowWhiteSpace","trim","getProperty","noModelAttributes","includeModelProperty","modelPropertyFirst","attrValue","get","gettingByPath","propValue","getByPathArray","propertyName","pathArray","nextName","shift","getByPath","path","split","getOption","also","_opts","deep","instanceGetOption","normalizeStringArray","arr","caseSensitive","check","item","checkKey","normalizeArgument","returnObject","normalizeValueAndFlag","flag","compare","searchFlags","values","flags","useObjectValues","filtered","good","all","processReturns","founded","delimeter","takeObjectKeys","pluck","doNotPluck","index","normalizedReturn","returnAs","processor","processorOptions","getFlag","returnOptions","pick","hasFlag","has","createMixinFromObject","mixedObj","hasOwnProperty","constructor","hasConstructor","mx","arguments","Base","normalizeArguments","raw","wrap","wrapObjectWithConstructor","merge","mergeObjects","mixins","size","unshift","withMethod","Mixed","class","Memo","Ctor","mixed","mix","_ctor","Error","pstoSetPair","pair","keyvalue","pstoSetKeyValue","decodeURIComponent","transform","paramsToObject","emptyObject","rawpairs","pairs","memo","rawpair","asArray","setProperty","set","silent","setByPathArr","modelContext","models","normalizeSetByPathOptions","ext","triggerModelEventsOnSetByPath","rest","pathChunks","trigger","property","ensureSetByPathArguments","errors","setByPath","argumentsErrors","ensureArguments","normalizeOptions","setByPathArray","parseKey","chunks","_key","parseInt","buildKeyPath","k","build","params","qs","allmeeted","hasMeet","markAsMeeted","okey","stored","meeted","exists","notIndexed","complex","simple","unFlat","res","e","getType","sameType","at","bt","compareObjects","objectA","objectB","flat","allvalues","uniq","concat","valuesA","_v","valuesB","allkeys","keys","triggerMethodOn","triggerMethod","event","methodName","method","mergeOptions","flatten","merged","option","isCtor","instance","checkCtor","isClass","shouldInvoke","getByKey","contextOptions","compiledOptions","buildByKey","getOptions","buildContext","buildText","knownCtor","toArguments","definition","buildViewByKey","TextView","isViewClass","enumsStore","enumsApi","_enum","getEnum","extendStore","skipTake","array","take","skip","toArray","taken","config","BaseNodeRegion","destroySelf","destroyNode","destroy","el","remove","normalizeElement","selector","body","document","querySelector","Element","jquery","renderInNode","view","replaceElement","destroySelfOnEmpty","destroyOnEmpty","defer","NodeRegion","createElement","appendChild","region","show","cloneObject","refs","cloned","cloneValue","functions","norm","objects","dest","unflat"],"mappings":"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"}